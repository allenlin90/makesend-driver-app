/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/checkToken.js":
/*!******************************!*\
  !*** ./src/js/checkToken.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.loginProcess = exports.checkToken = exports.generateHeaders = undefined;\n\nvar generateHeaders = exports.generateHeaders = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        _context.prev = 0;\n                        _context.next = 3;\n                        return fetch(headerEndpoint, {\n                            method: 'post',\n                            mod: 'cors',\n                            headers: {\n                                'Content-Type': 'application/json'\n                            }\n                        }).then(function (res) {\n                            return res.json();\n                        }).then(function (data) {\n                            return data;\n                        });\n\n                    case 3:\n                        response = _context.sent;\n                        return _context.abrupt('return', response);\n\n                    case 7:\n                        _context.prev = 7;\n                        _context.t0 = _context['catch'](0);\n\n                        console.log(_context.t0);\n\n                    case 10:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, this, [[0, 7]]);\n    }));\n\n    return function generateHeaders() {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nvar checkToken = exports.checkToken = function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var validation, token, headers, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n                switch (_context2.prev = _context2.next) {\n                    case 0:\n                        validation = false;\n                        token = userToken();\n                        _context2.next = 4;\n                        return generateHeaders();\n\n                    case 4:\n                        headers = _context2.sent;\n\n                        if (!token) {\n                            _context2.next = 10;\n                            break;\n                        }\n\n                        _context2.next = 8;\n                        return fetch(authCheckEndpoint, {\n                            method: 'post',\n                            mod: 'cors',\n                            responseType: 'json',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'User-Token': '' + token,\n                                'Client-Token': headers['Client-Token'],\n                                'Time-Stamp': headers['Time-Stamp'],\n                                'Time-Signature': headers['Time-Signature']\n                            }\n                        }).then(function (res) {\n                            return res.json();\n                        }).then(function (data) {\n                            return data;\n                        }).catch(function (err) {\n                            return console.log(err);\n                        });\n\n                    case 8:\n                        response = _context2.sent;\n\n                        if (response.resCode === 200) {\n                            validation = true;\n                        }\n\n                    case 10:\n                        return _context2.abrupt('return', validation);\n\n                    case 11:\n                    case 'end':\n                        return _context2.stop();\n                }\n            }\n        }, _callee2, this);\n    }));\n\n    return function checkToken() {\n        return _ref2.apply(this, arguments);\n    };\n}();\n\nvar loginProcess = exports.loginProcess = function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var email = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var password = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        var rememberMe = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var headers, response;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n                switch (_context3.prev = _context3.next) {\n                    case 0:\n                        _context3.next = 2;\n                        return generateHeaders();\n\n                    case 2:\n                        headers = _context3.sent;\n                        _context3.next = 5;\n                        return fetch(loginEndpoint, {\n                            method: 'post',\n                            headers: {\n                                'Content-type': 'application/json',\n                                'Client-Token': headers['Client-Token'],\n                                'Time-Stamp': headers['Time-Stamp'],\n                                'Time-Signature': headers['Time-Signature']\n                            },\n                            body: JSON.stringify({\n                                email: email,\n                                password: password,\n                                keepAlive: rememberMe ? 1 : 0\n                            })\n                        }).then(function (res) {\n                            return res.json();\n                        }).then(function (data) {\n                            return data;\n                        }).catch(function (err) {\n                            return err;\n                        });\n\n                    case 5:\n                        response = _context3.sent;\n\n                        if (!(response.resCode === 200)) {\n                            _context3.next = 10;\n                            break;\n                        }\n\n                        if (rememberMe) {\n                            localStorage.setItem('token', response.token);\n                        } else {\n                            sessionStorage.setItem('token', response.token);\n                        }\n                        window.location.hash = 'dashboard';\n                        return _context3.abrupt('return', true);\n\n                    case 10:\n                        return _context3.abrupt('return', false);\n\n                    case 11:\n                    case 'end':\n                        return _context3.stop();\n                }\n            }\n        }, _callee3, this);\n    }));\n\n    return function loginProcess() {\n        return _ref3.apply(this, arguments);\n    };\n}();\n\nexports.userToken = userToken;\n\nvar _endpoints = __webpack_require__(/*! ./endpoints.js */ \"./src/js/endpoints.js\");\n\nvar _endpoints2 = _interopRequireDefault(_endpoints);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar headerEndpoint = _endpoints2.default.host + '/header';\nvar loginEndpoint = _endpoints2.default.host + '/login';\nvar authCheckEndpoint = _endpoints2.default.checkToken;\n\nfunction userToken() {\n    var token = sessionStorage.getItem('token') || localStorage.getItem('token') || null;\n    return token;\n}\n\n//# sourceURL=webpack:///./src/js/checkToken.js?");

/***/ }),

/***/ "./src/js/endpoints.js":
/*!*****************************!*\
  !*** ./src/js/endpoints.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar host = 'https://makesend-driver.herokuapp.com'; //window.location.hostname === '127.0.0.1' || 'localhost' ? 'http://localhost:8080' : '';\nvar endpoints = {\n    host: host,\n    checkToken: 'https://api.airportels.ninja/api/msd/authPing'\n};\n\nexports.default = endpoints;\n\n//# sourceURL=webpack:///./src/js/endpoints.js?");

/***/ }),

/***/ "./src/js/footer.js":
/*!**************************!*\
  !*** ./src/js/footer.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.navigators = navigators;\nfunction navigators() {\n    var location = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'dashboard';\n\n    var container = document.querySelector('.container');\n    var footer = document.querySelector('footer');\n    container.innerHTML = '';\n    footer.innerHTML = '\\n        <div class=\"navigator\">\\n            <div>\\n                <a href=\"#scanner\" class=\"\" id=\"navi_scanner\">\\n                    <i class=\"fas fa-qrcode\"></i>\\n                    <span>Scan</span>\\n                </a>\\n            </div>\\n            <div>\\n                <a href=\"#search\" class=\"\" id=\"navi_search\">\\n                    <i class=\"fas fa-search\"></i>\\n                    <span>Search</span>\\n                </a>\\n            </div>\\n            <div>\\n                <a href=\"#tasks\" class=\"\" id=\"navi_tasks\">\\n                    <i class=\"fas fa-tasks\"></i>\\n                    <span>Tasks</span>\\n                </a>\\n            </div>\\n            <div>\\n                <a href=\"#setting\" class=\"\" id=\"navi_setting\">\\n                    <i class=\"fas fa-cog\"></i>\\n                    <span>Setting</span>\\n                </a>\\n            </div>\\n            <div>\\n                <a href=\"#\" class=\"\" id=\"navi_logout\">\\n                    <i class=\"fas fa-sign-out-alt\"></i>\\n                    <span>Logout</span>\\n                </a>\\n            </div>\\n        </div>\\n    ';\n    user_logout();\n    activeFeature(location);\n}\n\nfunction activeFeature(location) {\n    var scanner = document.querySelector('#navi_scanner');\n    var search = document.querySelector('#navi_search');\n    var tasks = document.querySelector('#navi_tasks');\n    var setting = document.querySelector('#navi_setting');\n    [tasks, search, scanner, setting].forEach(function (item) {\n        item.classList.remove('selected');\n    });\n\n    switch (location) {\n        case 'dashboard':\n            search.classList.add('selected');\n            break;\n        case 'scanner':\n            scanner.classList.add('selected');\n            break;\n        case 'tasks':\n            tasks.classList.add('selected');\n            break;\n        case 'setting':\n            setting.classList.add('selected');\n            break;\n        default:\n            search.classList.add('selected');\n    }\n}\n\nfunction user_logout() {\n    var logoutBtn = document.querySelector('#navi_logout');\n    var body = document.querySelector('body');\n    var footer = document.querySelector('footer');\n    logoutBtn.addEventListener('click', function (event) {\n        event.stopPropagation();\n        sessionStorage.clear();\n        localStorage.clear();\n        footer.innerHTML = '';\n        body.style.backgroundColor = 'rgba(0, 0, 0, 0.1)';\n        var container = document.querySelector('.container');\n        container.style.justifyContent = 'center';\n        window.location.hash = '';\n    });\n}\n\n//# sourceURL=webpack:///./src/js/footer.js?");

/***/ }),

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _userLogin = __webpack_require__(/*! ./userLogin.js */ \"./src/js/userLogin.js\");\n\nvar _footer = __webpack_require__(/*! ./footer.js */ \"./src/js/footer.js\");\n\nvar _checkToken = __webpack_require__(/*! ./checkToken.js */ \"./src/js/checkToken.js\");\n\nvar _searchParcel = __webpack_require__(/*! ./searchParcel.js */ \"./src/js/searchParcel.js\");\n\nvar _qrScanner = __webpack_require__(/*! ./qrScanner.js */ \"./src/js/qrScanner.js\");\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nwindow.onload = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n    var token, validToken;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n            switch (_context2.prev = _context2.next) {\n                case 0:\n                    token = localStorage.getItem('token') || sessionStorage.getItem('token');\n\n                    if (!token) {\n                        _context2.next = 8;\n                        break;\n                    }\n\n                    _context2.next = 4;\n                    return (0, _checkToken.checkToken)(token);\n\n                case 4:\n                    validToken = _context2.sent;\n\n                    if (validToken) {\n                        window.location.hash = 'dashboard';\n                        (0, _footer.navigators)();\n                        (0, _searchParcel.searchFeatures)();\n                    } else {\n                        (0, _userLogin.userLogin)();\n                    }\n                    _context2.next = 9;\n                    break;\n\n                case 8:\n                    (0, _userLogin.userLogin)();\n\n                case 9:\n\n                    window.onhashchange = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                        var validToken;\n                        return regeneratorRuntime.wrap(function _callee$(_context) {\n                            while (1) {\n                                switch (_context.prev = _context.next) {\n                                    case 0:\n                                        console.log('path changes!');\n                                        _context.next = 3;\n                                        return (0, _checkToken.checkToken)();\n\n                                    case 3:\n                                        validToken = _context.sent;\n\n                                        (0, _qrScanner.stopStream)();\n\n                                        if (!validToken) {\n                                            _context.next = 25;\n                                            break;\n                                        }\n\n                                        _context.t0 = window.location.hash;\n                                        _context.next = _context.t0 === '#dashboard' ? 9 : _context.t0 === '#scanner' ? 12 : _context.t0 === '#search' ? 15 : _context.t0 === '#tasks' ? 18 : _context.t0 === '#setting' ? 20 : 22;\n                                        break;\n\n                                    case 9:\n                                        (0, _footer.navigators)();\n                                        (0, _searchParcel.searchFeatures)();\n                                        return _context.abrupt('break', 23);\n\n                                    case 12:\n                                        (0, _footer.navigators)('scanner');\n                                        (0, _qrScanner.qrScanner)();\n                                        return _context.abrupt('break', 23);\n\n                                    case 15:\n                                        (0, _footer.navigators)('search');\n                                        (0, _searchParcel.searchFeatures)();\n                                        return _context.abrupt('break', 23);\n\n                                    case 18:\n                                        (0, _footer.navigators)('tasks');\n                                        return _context.abrupt('break', 23);\n\n                                    case 20:\n                                        (0, _footer.navigators)('setting');\n                                        return _context.abrupt('break', 23);\n\n                                    case 22:\n                                        window.location.hash = '';\n\n                                    case 23:\n                                        _context.next = 26;\n                                        break;\n\n                                    case 25:\n                                        (0, _userLogin.userLogin)();\n\n                                    case 26:\n                                    case 'end':\n                                        return _context.stop();\n                                }\n                            }\n                        }, _callee, this);\n                    }));\n\n                case 10:\n                case 'end':\n                    return _context2.stop();\n            }\n        }\n    }, _callee2, this);\n}));\n\n//# sourceURL=webpack:///./src/js/index.js?");

/***/ }),

/***/ "./src/js/qrScanner.js":
/*!*****************************!*\
  !*** ./src/js/qrScanner.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar qrScanner = exports.qrScanner = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var start = function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n                var _getDevices, devices, rearCameras, constraints, videoSource, _videoSource, _constraints;\n\n                return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                qrResult.style.display = \"none\";\n                                startScanBtn.style.display = \"none\";\n                                canvasElement.hidden = false;\n\n                                if (!/iphone|ipad|mac|apple|os\\sx/.test(deviceAgent().toLowerCase())) {\n                                    _context3.next = 23;\n                                    break;\n                                }\n\n                                _getDevices = function () {\n                                    var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                                        var _this = this;\n\n                                        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                                            while (1) {\n                                                switch (_context2.prev = _context2.next) {\n                                                    case 0:\n                                                        _context2.next = 2;\n                                                        return navigator.mediaDevices.getUserMedia({ video: true }).then(function () {\n                                                            var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n                                                                var devices, videoInputs, videoSelectedValue;\n                                                                return regeneratorRuntime.wrap(function _callee$(_context) {\n                                                                    while (1) {\n                                                                        switch (_context.prev = _context.next) {\n                                                                            case 0:\n                                                                                _context.next = 2;\n                                                                                return navigator.mediaDevices.enumerateDevices();\n\n                                                                            case 2:\n                                                                                devices = _context.sent;\n\n                                                                                if (!devices.length) {\n                                                                                    _context.next = 12;\n                                                                                    break;\n                                                                                }\n\n                                                                                videoInputs = devices.filter(function (device) {\n                                                                                    return device.kind === 'videoinput';\n                                                                                });\n                                                                                videoSelectedValue = videoSelect.value;\n\n                                                                                videoSelect.innerHTML = '';\n                                                                                videoInputs.forEach(function (videoInput, index) {\n                                                                                    var option = document.createElement('option');\n                                                                                    option.value = videoInput.deviceId;\n                                                                                    option.text = videoInput.label || \"camera \" + (index + 1);\n                                                                                    videoSelect.appendChild(option);\n                                                                                });\n                                                                                videoSelect.value = videoSelectedValue;\n                                                                                return _context.abrupt(\"return\", devices);\n\n                                                                            case 12:\n                                                                                errorHandler();\n                                                                                console.log('trigger');\n\n                                                                            case 14:\n                                                                            case \"end\":\n                                                                                return _context.stop();\n                                                                        }\n                                                                    }\n                                                                }, _callee, _this);\n                                                            }));\n\n                                                            return function (_x) {\n                                                                return _ref4.apply(this, arguments);\n                                                            };\n                                                        }()).catch(errorHandler);\n\n                                                    case 2:\n                                                        return _context2.abrupt(\"return\", _context2.sent);\n\n                                                    case 3:\n                                                    case \"end\":\n                                                        return _context2.stop();\n                                                }\n                                            }\n                                        }, _callee2, this);\n                                    }));\n\n                                    return function _getDevices() {\n                                        return _ref3.apply(this, arguments);\n                                    };\n                                }();\n\n                                _context3.prev = 5;\n\n                                if (window.stream) {\n                                    window.stream.getTracks().forEach(function (track) {\n                                        track.stop();\n                                    });\n                                }\n\n                                _context3.next = 9;\n                                return _getDevices();\n\n                            case 9:\n                                devices = _context3.sent;\n                                rearCameras = devices.filter(function (device) {\n                                    return device.kind === 'videoinput' && /(back|rear)/g.test(device.label.toLowerCase());\n                                });\n                                constraints = {};\n                                videoSource = videoSelect.value;\n\n                                if (rearCameras.length) {\n                                    constraints = {\n                                        video: { deviceId: videoSource ? { exact: videoSource } : rearCameras[rearCameras.length - 1].deviceId }\n                                    };\n                                } else {\n                                    constraints = {\n                                        video: { deviceId: { exact: undefined } }\n                                    };\n                                }\n                                console.log(constraints);\n                                navigator.mediaDevices.getUserMedia(constraints).then(gotStream).then(checkDevices).catch(errorHandler);\n                                _context3.next = 21;\n                                break;\n\n                            case 18:\n                                _context3.prev = 18;\n                                _context3.t0 = _context3[\"catch\"](5);\n\n                                errorHandler(_context3.t0);\n\n                            case 21:\n                                _context3.next = 24;\n                                break;\n\n                            case 23:\n                                try {\n                                    if (window.stream) {\n                                        window.stream.getTracks().forEach(function (track) {\n                                            track.stop();\n                                        });\n                                    }\n                                    _videoSource = videoSelect.value;\n                                    _constraints = null;\n\n                                    if (state.rearCameras.length) {\n                                        _constraints = {\n                                            video: { deviceId: _videoSource ? { exact: _videoSource } : { exact: state.rearCameras[state.rearCameras.length - 1].deviceId } }\n                                        };\n                                        navigator.mediaDevices.getUserMedia(_constraints).then(gotStream).then(checkDevices).catch(errorHandler);\n                                    } else {\n                                        _constraints = {\n                                            video: { deviceId: undefined }\n                                        };\n                                        try {\n                                            _constraints = { video: { facingMode: 'environment' } };\n                                            navigator.mediaDevices.getUserMedia(_constraints).then(gotStream).then(checkDevices).catch(errorHandler);\n                                        } catch (err) {\n                                            console.log('no rear camera');\n                                            _constraints = { video: true };\n                                            navigator.mediaDevices.getUserMedia(_constraints).then(gotStream).then(checkDevices).catch(errorHandler);\n                                        }\n                                    }\n                                    console.log(_constraints);\n                                } catch (err) {\n                                    console.log(err);\n                                }\n\n                            case 24:\n                            case \"end\":\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this, [[5, 18]]);\n            }));\n\n            return function start() {\n                return _ref2.apply(this, arguments);\n            };\n        }();\n\n        var checkDevices = function () {\n            var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n                var devices, videoInputs, videoSelectedValue, rearCameras;\n                return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                _context4.next = 2;\n                                return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n                                    return devices;\n                                }).catch(function (err) {\n                                    return err;\n                                });\n\n                            case 2:\n                                devices = _context4.sent;\n                                videoInputs = devices.filter(function (device) {\n                                    return device.kind === 'videoinput';\n                                });\n\n                                if (!videoInputs.length) {\n                                    _context4.next = 14;\n                                    break;\n                                }\n\n                                videoSelectedValue = videoSelect.value;\n\n                                videoSelect.innerHTML = '';\n                                videoInputs.forEach(function (videoInput, index) {\n                                    var option = document.createElement('option');\n                                    option.value = videoInput.deviceId;\n                                    option.text = videoInput.label || \"camera \" + (index + 1);\n                                    videoSelect.appendChild(option);\n                                });\n                                videoSelect.value = videoSelectedValue;\n                                rearCameras = devices.filter(function (device) {\n                                    return (/(back|rear)/g.test(device.label.toLowerCase())\n                                    );\n                                });\n\n                                state.rearCameras = rearCameras;\n                                return _context4.abrupt(\"return\", devices);\n\n                            case 14:\n                                errorHandler('This device has no available camera');\n\n                            case 15:\n                            case \"end\":\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this);\n            }));\n\n            return function checkDevices() {\n                return _ref5.apply(this, arguments);\n            };\n        }();\n\n        var container, video, canvasElement, canvas, qrResult, outputData, videoSelect, startScanBtn, readResult, gotStream, errorHandler, tick, scan, deviceAgent;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n                switch (_context5.prev = _context5.next) {\n                    case 0:\n                        deviceAgent = function deviceAgent() {\n                            var re = /\\((.*?)\\)/g;\n                            var userAgent = navigator.userAgent.match(re)[0];\n                            userAgent = userAgent.slice(1, userAgent.length - 1);\n                            return userAgent;\n                        };\n\n                        scan = function scan() {\n                            try {\n                                qrcode.decode();\n                            } catch (e) {\n                                setTimeout(scan, 300);\n                            }\n                        };\n\n                        tick = function tick() {\n                            canvasElement.height = state.video.videoHeight;\n                            canvasElement.width = state.video.videoWidth;\n                            canvas.drawImage(state.video, 0, 0, canvasElement.width, canvasElement.height);\n\n                            state.scanning && requestAnimationFrame(tick);\n                        };\n\n                        errorHandler = function errorHandler(err) {\n                            var message = \"<h1>App can't start camera because </h1>\\n            <p>\\\"\" + err + \"\\\"</p>\\n            <div id=\\\"refresh_page\\\" class=\\\"btn btn-light\\\" style=\\\"margin: 0 auto;\\\">Reload Page</div>\";\n                            document.querySelector('#qrcode_scanner').innerHTML = message;\n                            document.querySelector('#refresh_page').addEventListener('click', function (e) {\n                                e.stopPropagation();\n                                location.reload();\n                            });\n                            console.log(err);\n                        };\n\n                        gotStream = function gotStream(stream) {\n                            window.stream = stream; // make stream available to console\n                            state.scanning = true;\n\n                            state.video.setAttribute(\"playsinline\", true);\n                            state.video.srcObject = stream;\n                            state.video.play();\n                            tick();\n                            scan();\n                        };\n\n                        readResult = function readResult(res) {\n                            if (res) {\n                                qrResult.style.display = \"block\";\n                                outputData.innerText = res;\n                                startScanBtn.style.display = \"block\";\n                                state.scanning = false;\n\n                                state.video.srcObject.getTracks().forEach(function (track) {\n                                    track.stop();\n                                });\n\n                                canvasElement.hidden = true;\n                            }\n                        };\n\n                        container = document.querySelector(\".container\");\n\n                        container.style.justifyContent = \"space-between\";\n                        container.innerHTML = \"\\n        <div id=\\\"qrcode_scanner\\\">\\n            <div>\\n                <h1>QR Code Scanner</h1>\\n            </div>\\n            <div id=\\\"videoSelect\\\">\\n                <label for=\\\"videoSource\\\">Change Camera</label>\\n                <select id=\\\"videoSource\\\" class=\\\"custom-select\\\"></select>\\n            </div>\\n            <canvas id=\\\"qr-canvas\\\"></canvas>\\n            <div id=\\\"qr-result\\\">\\n                <b>Result:</b><span id=\\\"outputData\\\"></span>\\n            </div>\\n            <div id=\\\"startScanBtn\\\">\\n                <label>\\n                    <img src=\\\"https://uploads.sitepoint.com/wp-content/uploads/2017/07/1499401426qr_icon.svg\\\">\\n                    <p>Scan Again</p>\\n                </label>\\n            </div>\\n        </div>\\n    \";\n\n                        video = document.createElement(\"video\");\n\n                        state.video = video;\n                        canvasElement = document.querySelector(\"#qr-canvas\");\n\n                        canvasElement.width = canvasElement.offsetHeight / 3 * 4;\n                        canvas = canvasElement.getContext(\"2d\");\n                        qrResult = document.querySelector(\"#qr-result\");\n                        outputData = document.querySelector(\"#outputData\");\n                        videoSelect = document.querySelector('#videoSource');\n                        startScanBtn = document.querySelector('#startScanBtn');\n\n\n                        videoSelect.onchange = start;\n                        _context5.next = 21;\n                        return checkDevices();\n\n                    case 21:\n                        start();\n\n                        qrcode.callback = readResult;\n\n                        startScanBtn.onclick = start;\n\n                        ;\n\n                    case 25:\n                    case \"end\":\n                        return _context5.stop();\n                }\n            }\n        }, _callee5, this);\n    }));\n\n    return function qrScanner() {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nexports.stopStream = stopStream;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar state = {\n    rearCameras: [],\n    cameras: [],\n    appleDevice: null,\n    scanning: false,\n    video: null\n};\n\nfunction stopStream() {\n    if (state.scanning) {\n        state.video.srcObject.getTracks().forEach(function (track) {\n            track.stop();\n        });\n        state.scanning = false;\n        state.video = null;\n    }\n}\n\n//# sourceURL=webpack:///./src/js/qrScanner.js?");

/***/ }),

/***/ "./src/js/searchFunctions.js":
/*!***********************************!*\
  !*** ./src/js/searchFunctions.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar searchParcelByPhone = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(phone) {\n        var validPhone, headers, searchResults, errorMsg;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        validPhone = phone.match(/^0\\d{9}/g);\n\n                        if (!validPhone) {\n                            _context.next = 20;\n                            break;\n                        }\n\n                        _context.prev = 2;\n                        _context.next = 5;\n                        return (0, _checkToken.generateHeaders)();\n\n                    case 5:\n                        headers = _context.sent;\n\n                        console.log(headers);\n                        _context.next = 9;\n                        return fetch(searchParcelByPhoneEndpoint, {\n                            method: 'POST',\n                            mode: 'cors',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'User-Token': '' + (localStorage.getItem('token') || sessionStorage.getItem('token')),\n                                'Client-Token': headers['Client-Token'],\n                                'Time-Stamp': headers['Time-Stamp'],\n                                'Time-Signature': headers['Time-Signature']\n                            },\n                            body: JSON.stringify({\n                                receiver_phone: phone\n                            })\n                        }).then(function (res) {\n                            return res.json();\n                        }).then(function (data) {\n                            return data;\n                        });\n\n                    case 9:\n                        searchResults = _context.sent;\n\n                        console.log(searchResults);\n                        state.parcels = searchResults.map(function (parcel) {\n                            var serviceDate = parcel.service_date.slice(0, 10);\n                            parcel.service_date = serviceDate;\n                            return parcel;\n                        });\n                        if (state.parcels.length) {\n                            listResults();\n                        } else {\n                            listErrorResult();\n                        }\n                        _context.next = 18;\n                        break;\n\n                    case 15:\n                        _context.prev = 15;\n                        _context.t0 = _context['catch'](2);\n\n                        errAlert(_context.t0);\n\n                    case 18:\n                        _context.next = 22;\n                        break;\n\n                    case 20:\n                        errorMsg = 'Phone number starts with 0 and is in 10 digits!';\n\n                        returnErrorList(errorMsg);\n\n                    case 22:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, this, [[2, 15]]);\n    }));\n\n    return function searchParcelByPhone(_x) {\n        return _ref.apply(this, arguments);\n    };\n}();\n\nvar searchParcelById = function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var shipmentId, headers, searchResults, errorMsg;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n                switch (_context2.prev = _context2.next) {\n                    case 0:\n                        // EX2101181126620\n                        shipmentId = /^[eE][xX]\\d{13}/g.exec(id);\n\n                        if (!shipmentId) {\n                            _context2.next = 18;\n                            break;\n                        }\n\n                        _context2.prev = 2;\n                        _context2.next = 5;\n                        return (0, _checkToken.generateHeaders)();\n\n                    case 5:\n                        headers = _context2.sent;\n                        _context2.next = 8;\n                        return fetch(searchParcelByIdEndpoint, {\n                            method: 'POST',\n                            mode: 'cors',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'User-Token': '' + (localStorage.getItem('token') || sessionStorage.getItem('token')),\n                                'client-token': headers['client-token'],\n                                'time-stamp': headers['time-stamp'],\n                                'time-signature': headers['time-signature']\n                            },\n                            body: JSON.stringify({\n                                shipmentIDs: [shipmentId[0]]\n                            })\n                        }).then(function (res) {\n                            return res.json();\n                        }).then(function (data) {\n                            return data;\n                        });\n\n                    case 8:\n                        searchResults = _context2.sent;\n\n                        state.parcels = searchResults.results;\n                        if (state.parcels.length) {\n                            listResults();\n                        } else {\n                            listErrorResult();\n                        }\n                        _context2.next = 16;\n                        break;\n\n                    case 13:\n                        _context2.prev = 13;\n                        _context2.t0 = _context2['catch'](2);\n\n                        errAlert(_context2.t0);\n\n                    case 16:\n                        _context2.next = 20;\n                        break;\n\n                    case 18:\n                        errorMsg = 'Your tracking ID is invalid!';\n\n                        returnErrorList(errorMsg);\n\n                    case 20:\n                    case 'end':\n                        return _context2.stop();\n                }\n            }\n        }, _callee2, this, [[2, 13]]);\n    }));\n\n    return function searchParcelById(_x2) {\n        return _ref2.apply(this, arguments);\n    };\n}();\n\nexports.handleSubmitEvent = handleSubmitEvent;\nexports.handleInputEvent = handleInputEvent;\n\nvar _signaturePad = __webpack_require__(/*! ./signaturePad.js */ \"./src/js/signaturePad.js\");\n\nvar _uploadImage = __webpack_require__(/*! ./uploadImage.js */ \"./src/js/uploadImage.js\");\n\nvar _endpoints = __webpack_require__(/*! ./endpoints.js */ \"./src/js/endpoints.js\");\n\nvar _endpoints2 = _interopRequireDefault(_endpoints);\n\nvar _checkToken = __webpack_require__(/*! ./checkToken.js */ \"./src/js/checkToken.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar searchParcelByPhoneEndpoint = _endpoints2.default.host + '/parcel';\nvar searchParcelByIdEndpoint = 'https://api.airportels.ninja/api/waybill/detail';\n\nvar state = {\n    input: '',\n    timeoutId: null,\n    parcels: []\n};\n\nfunction handleSubmitEvent() {\n    var form = document.querySelector('form');\n    form.onsubmit = function (event) {\n        event.preventDefault();\n        searchParcel();\n    };\n}\n\nfunction handleInputEvent() {\n    var input = document.querySelector('input');\n    input.oninput = function (event) {\n        state.input = event.target.value;\n        document.querySelector('#result_list ul').innerHTML = '';\n        if (state.timeoutId) {\n            clearTimeout(state.timeoutId);\n        }\n        var timeoutId = setTimeout(function () {\n            searchParcel();\n        }, 500);\n        state.timeoutId = timeoutId;\n    };\n}\n\nfunction searchParcel() {\n    var input = document.querySelector('input');\n    if (input.id === 'receiver_phone') {\n        searchParcelByPhone(state.input);\n    } else if (input.id === 'tracking_id') {\n        searchParcelById(state.input);\n    }\n}\n\nfunction returnErrorList(message) {\n    document.querySelector('#result_list ul').innerHTML = '\\n    <li id=\"input_error\" class=\"list-group-item\" style=\"color: red; font-weight: bold;\"></li>\\n    ';\n    document.querySelector('#input_error').innerText = message;\n}\n\nfunction listErrorResult() {\n    document.querySelector('#result_list ul').innerHTML = '\\n    <li id=\"input_error\" class=\"list-group-item\" style=\"color: red; font-weight: bold;\"></li>\\n    ';\n    document.querySelector('#input_error').innerText = 'No result from \"' + state.input + '\"';\n}\n\nfunction listResults() {\n    var parcels = state.parcels.map(function (parcel) {\n        var btnType = '';\n        var btnActive = '';\n        switch (parcel.status.toLowerCase().trim()) {\n            case 'pending':\n            case 'in hub':\n            case 'delivering':\n            case 'delivering (delay)':\n            case 'returning':\n            case 're-deilvering':\n                btnType = 'primary';\n                break;\n            case 'delivered':\n            case 'delivered (delay)':\n            case 'returned':\n                btnType = 'primary';\n                btnActive = 'disabled';\n                break;\n            case 'canceled':\n            case 'failed delivery':\n            case 'not found':\n                btnType = 'danger';\n                btnActive = 'disabled';\n                break;\n            default:\n                btnType = 'primary';\n        }\n        var item = '\\n        <div class=\"card\" data-shipment-id=\"' + parcel.shipmentID + '\">\\n            <div class=\"card-body\">\\n                <h5 class=\"card-title\">Parcel ID: ' + parcel.shipmentID + '</h5>\\n                <h6 class=\"card-subtitle mb-2 text-muted\">Service Date: ' + parcel.service_date + '</h6>\\n                <h6 class=\"card-subtitle mb-2 text-muted\">Delivery Status: ' + parcel.status + '</h6>\\n                <p class=\"card-text\">' + parcel.receiver_name + ' ' + parcel.receiver_no + '</p>\\n                <p class=\"card-text\">' + parcel.dropoff_address + ', ' + parcel.dropoff_district + ', ' + parcel.dropoff_province + ' ' + parcel.dropoff_postcode + '</p>\\n                <p class=\"card-text\">' + parcel.note + '</p>\\n                <div class=\"card-link btn btn-primary\" data-type=\"photo\">Photo</div>\\n                <div class=\"card-link btn btn-' + btnType + ' ' + btnActive + '\" data-type=\"signature\">Singature</div>\\n            </div>\\n        </div>\\n        ';\n        return item;\n    }).join('');\n    document.querySelector('#result_list ul').innerHTML = parcels;\n    var parcelCards = [].concat(_toConsumableArray(document.querySelector('.list-group.list-group-flush').children));\n    parcelCards.forEach(function (parcelCard) {\n        var uploadSignatureBtn = parcelCard.querySelector('div[data-type=signature]');\n        uploadSignatureBtn.addEventListener('click', function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            (0, _signaturePad.createSignaturePad)(parcelCard.dataset.shipmentId);\n        });\n\n        var uploadImageBtn = parcelCard.querySelector('div[data-type=photo]');\n        uploadImageBtn.addEventListener('click', function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            (0, _uploadImage.createImageUploader)(parcelCard.dataset.shipmentId);\n        });\n    });\n}\n\nfunction errAlert(errMessage) {\n    var header = document.querySelector('header');\n    header.innerHTML = '\\n    <div id=\"warning\" class=\"alert alert-danger\" role=\"alert\">\\n        Something went wrong: ' + errMessage + '\\n    </div>\\n    ';\n    setTimeout(function () {\n        header.innerHTML = '';\n    }, 5000);\n}\n\n//# sourceURL=webpack:///./src/js/searchFunctions.js?");

/***/ }),

/***/ "./src/js/searchParcel.js":
/*!********************************!*\
  !*** ./src/js/searchParcel.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.searchFeatures = searchFeatures;\n\nvar _searchFunctions = __webpack_require__(/*! ./searchFunctions.js */ \"./src/js/searchFunctions.js\");\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction searchFeatures() {\n    var container = document.querySelector('.container');\n    container.style.justifyContent = 'space-between';\n    container.innerHTML = '\\n    <div id=\"search_parcel\">\\n        <div id=\"search_functions\">\\n            <div id=\"search_by_phone_btn\" class=\"btn btn-warning\">Receiver Phone</div>\\n            <div id=\"search_by_tracking_id_btn\" class=\"btn btn-dark\">Tracking ID</div>\\n        </div>\\n        <div id=\"search_list\">\\n            <div id=\"search_bar\">\\n                <form action=\"\">\\n                    <input class=\"form-control\" id=\"receiver_phone\" type=\"tel\" name=\"receiver_phone\" value=\"\"\\n                        inputmode=\"numeric\" placeholder=\"E.g. 0632166699\" autocomplete=\"off\" pattern=\"[0-9]{10}\">\\n                    <button type=\"submit\"><i class=\"fa fa-search\"></i></button>\\n                </form>\\n            </div>            \\n            <div id=\"result_list\">\\n                <ul class=\"list-group list-group-flush\">\\n                    <li class=\"list-group-item\">Please search parcel by <br> <b>Receiver Phone</b> or <br> <b>Tracking ID</b></li>\\n                </ul>\\n            </div>\\n        </div>\\n    </div>\\n    ';\n    (0, _searchFunctions.handleSubmitEvent)();\n    (0, _searchFunctions.handleInputEvent)();\n    var searchByPhoneBtn = document.querySelector('#search_by_phone_btn');\n    var searchByTrackingIdBtn = document.querySelector('#search_by_tracking_id_btn');\n    var searchBar = document.querySelector('#search_bar');\n\n    var searchInputByTrackingId = '\\n    <form action=\"\" class=\"form-group\">\\n        <input class=\"form-control\" id=\"tracking_id\" type=\"text\" name=\"tracking_id\" value=\"\"\\n            placeholder=\"#EX1234567890123\" autocomplete=\"off\">\\n        <button type=\"submit\"><i class=\"fa fa-search\"></i></button>        \\n    </form>\\n    ';\n\n    var searchInputByPhone = '\\n    <form action=\"\">\\n        <input class=\"form-control\" id=\"receiver_phone\" type=\"tel\" name=\"receiver_phone\" value=\"\"\\n            inputmode=\"numeric\" placeholder=\"E.g. 0632166699\" autocomplete=\"off\" pattern=\"[0-9]{10}\">\\n        <button type=\"submit\"><i class=\"fa fa-search\"></i></button>\\n    </form>\\n    ';\n\n    searchByPhoneBtn.addEventListener('click', addSearchInput);\n    searchByTrackingIdBtn.addEventListener('click', addSearchInput);\n\n    function addSearchInput(event) {\n        var _this = this;\n\n        event.stopPropagation();\n        var buttons = [].concat(_toConsumableArray(this.parentNode.children));\n        buttons.forEach(function (btn) {\n            if (btn === _this) {\n                btn.classList.add('btn-warning');\n                btn.classList.remove('btn-dark');\n            } else {\n                btn.classList.add('btn-dark');\n                btn.classList.remove('btn-warning');\n            }\n        });\n        if (this.id === 'search_by_tracking_id_btn') {\n            searchBar.innerHTML = searchInputByTrackingId;\n        } else if (this.id === 'search_by_phone_btn') {\n            searchBar.innerHTML = searchInputByPhone;\n        }\n        document.querySelector('#result_list ul').innerHTML = '<li class=\"list-group-item\">Please search parcel by <br> <b>Receiver Phone</b> or <br> <b>Tracking ID</b></li>';\n        (0, _searchFunctions.handleSubmitEvent)();\n        (0, _searchFunctions.handleInputEvent)();\n    }\n}\n\n//# sourceURL=webpack:///./src/js/searchParcel.js?");

/***/ }),

/***/ "./src/js/signaturePad.js":
/*!********************************!*\
  !*** ./src/js/signaturePad.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createSignaturePad = createSignaturePad;\n\nvar _checkToken = __webpack_require__(/*! ./checkToken.js */ \"./src/js/checkToken.js\");\n\nvar _userLogin = __webpack_require__(/*! ./userLogin.js */ \"./src/js/userLogin.js\");\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction createSignaturePad(shipmentId) {\n    var footer = document.querySelector('footer');\n    footer.remove();\n    var container = document.querySelector('.container');\n    var signatureDiv = document.createElement('div');\n    signatureDiv.className = 'modal-dialog modal-dialog-scrollable update-pod';\n    signatureDiv.innerHTML = '\\n    <div class=\"modal-content\">\\n        <div class=\"modal-header\">\\n            <h5 class=\"modal-title\" id=\"exampleModalScrollableTitle\">Tracking ID: ' + shipmentId + '</h5>\\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\\n        </div>\\n        <div class=\"modal-body\">\\n            <div id=\"signature_upload\" class=\"signature-pad\">\\n                <div class=\"signature-pad--body\">\\n                    <canvas id=\"signature_canvas\">This browser doesn\\'t support canvas</canvas>\\n                </div>\\n                <div class=\"signature-pad--footer\">\\n                    <div class=\"description\">Sign above</div>\\n                    <div class=\"signature-pad--actions\">\\n                        <div>\\n                            <button type=\"button\" class=\"button clear\" data-action=\"clear\">Clear</button>\\n                            <button type=\"button\" class=\"button\" data-action=\"undo\">Undo</button>\\n                        </div>\\n                        <div>\\n                            <button type=\"button\" class=\"button save\" data-action=\"save-png\">Save\\n                                as\\n                                PNG</button>\\n                            <button type=\"button\" class=\"button save\" data-action=\"save-jpg\">Save\\n                                as\\n                                JPG</button>                            \\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\"modal-footer\">\\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\\n            <button type=\"button\" class=\"btn btn-primary\" data-action=\"upload-signature\">Upload</button>\\n        </div>\\n    </div>\\n    ';\n\n    var svgBtn = '<button type=\"button\" class=\"button save\" data-action=\"save-svg\">Save as SVG</button>';\n\n    container.appendChild(signatureDiv);\n\n    var clearButton = signatureDiv.querySelector(\"[data-action=clear]\");\n    var undoButton = signatureDiv.querySelector(\"[data-action=undo]\");\n    var savePNGButton = signatureDiv.querySelector(\"[data-action=save-png]\");\n    var saveJPGButton = signatureDiv.querySelector(\"[data-action=save-jpg]\");\n    // const saveSVGButton = signatureDiv.querySelector(\"[data-action=save-svg]\");\n    var signatureCanvas = signatureDiv.querySelector(\"#signature_canvas\");\n    var signaturePad = new SignaturePad(signatureCanvas, {\n        backgroundColor: 'rgb(255, 255, 255)'\n    });\n    function resizeCanvas() {\n        // This part causes the canvas to be cleared\n        signatureCanvas.width = signatureCanvas.offsetWidth;\n        signatureCanvas.height = signatureCanvas.offsetHeight;\n        // signatureCanvas.clientHeight = signatureCanvas.offsetHeight;\n        // if (/iphone|ipad|mac|apple|os\\sx/.test(deviceAgent().toLowerCase())) {}\n        signatureCanvas.getContext(\"2d\");\n        signaturePad.clear();\n    }\n\n    window.addEventListener('resize', resizeCanvas);\n    resizeCanvas();\n\n    function download(dataURL, filename) {\n        var blob = dataURLToBlob(dataURL);\n        var url = window.URL.createObjectURL(blob);\n\n        var a = document.createElement(\"a\");\n        a.style = \"display: none\";\n        a.href = url;\n        a.download = filename;\n\n        document.body.appendChild(a);\n        a.click();\n\n        window.URL.revokeObjectURL(url);\n    }\n\n    // One could simply use Canvas#toBlob method instead, but it's just to show\n    // that it can be done using result of SignaturePad#toDataURL.\n    function dataURLToBlob(dataURL) {\n        // Code taken from https://github.com/ebidel/filer.js\n        var parts = dataURL.split(';base64,');\n        var contentType = parts[0].split(\":\")[1];\n        var raw = window.atob(parts[1]);\n        var rawLength = raw.length;\n        var uInt8Array = new Uint8Array(rawLength);\n\n        for (var i = 0; i < rawLength; ++i) {\n            uInt8Array[i] = raw.charCodeAt(i);\n        }\n\n        return new Blob([uInt8Array], { type: contentType });\n    }\n\n    clearButton.addEventListener(\"click\", function (event) {\n        signaturePad.clear();\n    });\n\n    undoButton.addEventListener(\"click\", function (event) {\n        var data = signaturePad.toData();\n\n        if (data) {\n            data.pop(); // remove the last dot or line\n            signaturePad.fromData(data);\n        }\n    });\n\n    savePNGButton.addEventListener(\"click\", function (event) {\n        if (signaturePad.isEmpty()) {\n            alert(\"Please provide a signature first.\");\n        } else {\n            var dataURL = signaturePad.toDataURL();\n            download(dataURL, \"signature.png\");\n        }\n    });\n\n    saveJPGButton.addEventListener(\"click\", function (event) {\n        if (signaturePad.isEmpty()) {\n            alert(\"Please provide a signature first.\");\n        } else {\n            var dataURL = signaturePad.toDataURL(\"image/jpeg\");\n            download(dataURL, \"signature.jpg\");\n        }\n    });\n\n    // saveSVGButton.addEventListener(\"click\", function (event) {\n    //     if (signaturePad.isEmpty()) {\n    //         alert(\"Please provide a signature first.\");\n    //     } else {\n    //         const dataURL = signaturePad.toDataURL('image/svg+xml');\n    //         download(dataURL, \"signature.svg\");\n    //     }\n    // });\n\n    var uploadBtn = container.querySelector('[data-action=upload-signature]');\n    uploadBtn.onclick = function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {\n            var dataURL, token, headers, response, message, _message;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            dataURL = signaturePad.toDataURL(\"image/jpeg\");\n                            token = (0, _checkToken.userToken)();\n\n                            if (!token) {\n                                _context.next = 12;\n                                break;\n                            }\n\n                            _context.next = 5;\n                            return (0, _checkToken.generateHeaders)();\n\n                        case 5:\n                            headers = _context.sent;\n                            _context.next = 8;\n                            return fetch('https://api.airportels.ninja/api/msd/delivery/uploadPOD', {\n                                method: 'post',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    'User-Token': '' + token,\n                                    'Client-Token': headers['Client-Token'],\n                                    'Time-Stamp': headers['Time-Stamp'],\n                                    'Time-Signature': headers['Time-Signature']\n                                },\n                                body: JSON.stringify({\n                                    trackingID: shipmentId,\n                                    type: 'signature',\n                                    PODImage: [dataURL],\n                                    fileName: 'signatuer_' + shipmentId\n                                })\n                            }).then(function (res) {\n                                return res.json();\n                            }).then(function (data) {\n                                return data;\n                            }).catch(function (err) {\n                                return alert(err);\n                            });\n\n                        case 8:\n                            response = _context.sent;\n\n                            if (response.resCode === 200 && response.result.length) {\n                                // need to inactivate buttons when the delivery status is delivered\n                                message = 'upload signature for ' + shipmentId + ' success!';\n\n                                console.log(message);\n                                alert(message);\n                                removeSignaturePad();\n                            } else {\n                                _message = 'Error! Upload signature for ' + shipmentId + ' failed!';\n\n                                console.log(_message);\n                                alert(_message);\n                            }\n                            _context.next = 14;\n                            break;\n\n                        case 12:\n                            alert('token is invalid!');\n                            (0, _userLogin.userLogin)();\n\n                        case 14:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, this);\n        }));\n\n        return function (_x) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n\n    var closeBtnTop = container.querySelector('.modal-header button');\n    closeBtnTop.onclick = removeSignaturePad;\n    var closeBtnBottom = container.querySelector('.modal-footer button');\n    closeBtnBottom.onclick = removeSignaturePad;\n\n    function removeSignaturePad() {\n        signatureDiv.remove();\n        container.insertAdjacentElement('afterend', footer);\n    }\n\n    function deviceAgent() {\n        var re = /\\((.*?)\\)/g;\n        var userAgent = navigator.userAgent.match(re)[0];\n        userAgent = userAgent.slice(1, userAgent.length - 1);\n        return userAgent;\n    }\n}\n\n//# sourceURL=webpack:///./src/js/signaturePad.js?");

/***/ }),

/***/ "./src/js/uploadImage.js":
/*!*******************************!*\
  !*** ./src/js/uploadImage.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createImageUploader = createImageUploader;\n\nvar _checkToken = __webpack_require__(/*! ./checkToken.js */ \"./src/js/checkToken.js\");\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar state = {\n    files: [],\n    compressedFiles: []\n};\n\nfunction createImageUploader(shipmentId) {\n    var uploadImages = function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n            var images = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n            var fileInputs = arguments[1];\n            var token, headers;\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            token = (0, _checkToken.userToken)();\n                            _context2.next = 3;\n                            return (0, _checkToken.generateHeaders)();\n\n                        case 3:\n                            headers = _context2.sent;\n\n                            if (!token) {\n                                _context2.next = 9;\n                                break;\n                            }\n\n                            _context2.next = 7;\n                            return fetch('https://api.airportels.ninja/api/msd/delivery/uploadPOD', {\n                                method: 'post',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    'User-Token': '' + token,\n                                    'Client-Token': headers['Client-Token'],\n                                    'Time-Stamp': headers['Time-Stamp'],\n                                    'Time-Signature': headers['Time-Signature']\n                                },\n                                body: JSON.stringify({\n                                    trackingID: shipmentId,\n                                    type: 'image',\n                                    PODImage: images,\n                                    fileName: 'pod_' + shipmentId + '_' + new Date().toISOString()\n                                })\n                            }).then(function (res) {\n                                return res.json();\n                            }).then(function (data) {\n                                if (data.resCode === 200 && data.result.length) {\n                                    // need to inactivate buttons when the delivery status is delivered\n                                    var image = data.result.length > 1 ? 'images' : 'image';\n                                    var message = 'upload ' + data.result.length + ' ' + image + ' for ' + shipmentId + ' success!';\n                                    console.log(message);\n                                    alert(message);\n                                    fileInputs.clearPreviewPanel();\n                                    removeImageUploader();\n                                } else {\n                                    var _message = 'upload image for ' + shipmentId + ' failed';\n                                    console.log(_message);\n                                    alert(_message);\n                                }\n                            }).catch(function (err) {\n                                alert(err);\n                            });\n\n                        case 7:\n                            _context2.next = 11;\n                            break;\n\n                        case 9:\n                            alert('token is invalid!');\n                            userLogin();\n\n                        case 11:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, this);\n        }));\n\n        return function uploadImages() {\n            return _ref2.apply(this, arguments);\n        };\n    }();\n\n    var footer = document.querySelector('footer');\n    footer.remove();\n    var container = document.querySelector('.container');\n    var imageUploaderDiv = document.createElement('div');\n    imageUploaderDiv.className = 'modal-dialog modal-dialog-scrollable update-pod';\n    imageUploaderDiv.innerHTML = '\\n    <div class=\"modal-content\">\\n        <div class=\"modal-header\">\\n            <h5 class=\"modal-title\" id=\"exampleModalScrollableTitle\">Tracking ID: ' + shipmentId + '</h5>\\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\\n        </div>\\n        <div class=\"modal-body\">\\n            <div id=\"photo_upload\">\\n                <div class=\"custom-file-container\" data-upload-id=\"imageUploader\">\\n                    <div class=\"image-upload-btns\">\\n                        <label class=\"custom-file-container__custom-file card shadow bg-white roundedcard shadow bg-white rounded\">\\n                            <div id=\"photo_btn\">\\n                                <img src=\"https://img.icons8.com/plasticine/camera.png\" alt=\"photo_button\">\\n                                <p>Take a photo</p>\\n                            </div>\\n                            <input type=\"file\" class=\"custom-file-container__custom-file__custom-file-input\"\\n                                accept=\"image/jpeg, image/png, image/gif\" multiple aria-label=\"Choose File\" style=\"display:none\" />\\n                            <input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"10485760\" style=\"display:none\" />\\n                            <span class=\"custom-file-container__custom-file__custom-file-control\" style=\"display:none\"></span>\\n                        </label>\\n                        \\n                    </div>\\n                    <div class=\"custom-file-container__image-preview\"></div>\\n                    <label><span>Remove All Photos</span>\\n                            <a href=\"javascript:void(0)\" class=\"custom-file-container__image-clear\"\\n                                title=\"Clear Image\">&times;</a>\\n                        </label>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\"modal-footer\">\\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\\n            <button type=\"button\" class=\"btn btn-primary\" data-action=\"upload-image\">Upload</button>\\n        </div>\\n    </div>\\n    ';\n    container.appendChild(imageUploaderDiv);\n\n    var upload = new FileUploadWithPreview(\"imageUploader\");\n\n    var uploadBtn = container.querySelector('[data-action=upload-image]');\n    uploadBtn.onclick = function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {\n            var files;\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            files = upload.cachedFileArray;\n\n                            if (files.length) {\n                                files.forEach(function (file) {\n                                    var reader = new FileReader();\n                                    reader.readAsDataURL(file);\n                                    reader.onload = function (event) {\n                                        var imgElement = document.createElement('img');\n                                        imgElement.src = event.target.result;\n                                        imgElement.onload = function (e) {\n                                            var canvas = document.createElement('canvas');\n                                            var MAX_WIDTH = 400;\n\n                                            var scaleSize = MAX_WIDTH / e.target.width;\n                                            canvas.width = MAX_WIDTH;\n                                            canvas.height = e.target.height * scaleSize;\n\n                                            var ctx = canvas.getContext('2d');\n                                            ctx.drawImage(e.target, 0, 0, canvas.width, canvas.height);\n                                            var srcEncoded = ctx.canvas.toDataURL(e.target, 'image/jpeg', 0.92);\n                                            state.compressedFiles.push(srcEncoded);\n                                            if (state.compressedFiles.length === files.length) {\n                                                uploadImages(state.compressedFiles, upload);\n                                            }\n                                        };\n                                    };\n                                });\n                            }\n\n                        case 2:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, this);\n        }));\n\n        return function (_x) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n\n    var closeBtnTop = container.querySelector('.modal-header button');\n    closeBtnTop.onclick = removeImageUploader;\n    var closeBtnBottom = container.querySelector('.modal-footer button');\n    closeBtnBottom.onclick = removeImageUploader;\n\n    function removeImageUploader() {\n        imageUploaderDiv.remove();\n        container.insertAdjacentElement('afterend', footer);\n    }\n}\n\n//# sourceURL=webpack:///./src/js/uploadImage.js?");

/***/ }),

/***/ "./src/js/userLogin.js":
/*!*****************************!*\
  !*** ./src/js/userLogin.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.userLogin = userLogin;\n\nvar _checkToken = __webpack_require__(/*! ./checkToken.js */ \"./src/js/checkToken.js\");\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar container = document.querySelector('.container');\n\nfunction userLogin() {\n    sessionStorage.clear();\n    localStorage.clear();\n    window.location.hash = '';\n    container.innerHTML = '\\n        <div id=\"login_form\">\\n            <div id=\"makesend_logo\">\\n                <img src=\"https://www.makesend.asia/wp-content/uploads/2018/06/logo-makesend.png\" alt=\"ms_logo\">\\n            </div>\\n            <form action=\"\" autocomplete=\"off\">\\n                <div class=\"mb-3\">\\n                    <label for=\"email\" class=\"form-label\">Email</label>\\n                    <input type=\"text\" class=\"form-control\" id=\"email\" aria-describedby=\"emailHelp\"\\n                        autocomplete=\"off\">\\n                    <div class=\"invalid-feedback\">Your email is not correct</div>\\n                </div>\\n                <div class=\"mb-3\">\\n                    <label for=\"password\" class=\"form-label\">Password</label>\\n                    <input type=\"password\" class=\"form-control\" id=\"password\">\\n                    <div class=\"invalid-feedback\">Your password is not correct</div>\\n                </div>\\n                <div class=\"mb-3 form-check\">\\n                    <input type=\"checkbox\" class=\"form-check-input\" id=\"remember_me\" checked>\\n                    <label class=\"form-check-label\" for=\"remember_me\">Remember me</label>\\n                </div>\\n                <button type=\"submit\" class=\"btn btn-warning\">Login</button>\\n            </form>\\n        </div>\\n    ';\n\n    var loginForm = document.querySelector('#login_form');\n    var usernameInput = document.querySelector('#email');\n    var passwordInput = document.querySelector('#password');\n    var rememberMeInput = document.querySelector('#remember_me');\n    usernameInput.addEventListener('input', removeInvalidClass);\n    passwordInput.addEventListener('input', removeInvalidClass);\n    loginForm.addEventListener('submit', function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {\n            var username, password, inputs, result;\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            event.preventDefault();\n                            username = usernameInput.value;\n                            password = passwordInput.value;\n                            inputs = {\n                                username: username,\n                                password: password\n                            };\n\n                            if (!(!username || !password)) {\n                                _context.next = 9;\n                                break;\n                            }\n\n                            usernameInput.classList.add('is-invalid');\n                            passwordInput.classList.add('is-invalid');\n                            _context.next = 17;\n                            break;\n\n                        case 9:\n                            if (!(username && password)) {\n                                _context.next = 15;\n                                break;\n                            }\n\n                            _context.next = 12;\n                            return (0, _checkToken.loginProcess)(username, password, rememberMeInput.checked);\n\n                        case 12:\n                            result = _context.sent;\n\n                            if (!result) {\n                                _context.next = 15;\n                                break;\n                            }\n\n                            return _context.abrupt('return');\n\n                        case 15:\n                            usernameInput.classList.add('is-invalid');\n                            passwordInput.classList.add('is-invalid');\n\n                        case 17:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, this);\n        }));\n\n        return function (_x) {\n            return _ref.apply(this, arguments);\n        };\n    }());\n\n    function removeInvalidClass() {\n        passwordInput.classList.remove('is-invalid');\n        usernameInput.classList.remove('is-invalid');\n    }\n}\n\n//# sourceURL=webpack:///./src/js/userLogin.js?");

/***/ })

/******/ });