!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=7)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loginProcess=n.checkToken=n.generateHeaders=void 0;var r,i,a,o=n.generateHeaders=(r=d(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(l,{method:"post",mod:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)});n.checkToken=(i=d(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,t=m(),e.next=4,o();case 4:if(r=e.sent,!t){e.next=10;break}return e.next=8,fetch(f,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","User-Token":""+t,"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"]}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}));case 8:200===e.sent.resCode&&(n=!0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),n.loginProcess=(a=d(regeneratorRuntime.mark((function e(){var n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,e.next=5,fetch(p,{method:"post",headers:{"Content-type":"application/json","Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"]},body:JSON.stringify({email:r,password:i,keepAlive:a?1:0})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 5:if(200!==(t=e.sent).resCode){e.next=10;break}return a?localStorage.setItem("token",t.token):sessionStorage.setItem("token",t.token),window.location.hash="dashboard",e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)});n.userToken=m;var s,c=t(1),u=(s=c)&&s.__esModule?s:{default:s};function d(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var l=u.default.host+"/header",p=u.default.host+"/login",f=u.default.checkToken;function m(){return sessionStorage.getItem("token")||localStorage.getItem("token")||null}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="https://makesend-driver.herokuapp.com",i="https://api.airportels.asia",a={host:r,apiEndpoint:i,appEndpoint:"https://app.makesend.asia",checkToken:i+"/api/msd/authPing",uploadEndpoint:i+"/api/msd/delivery/uploadPOD",searchParcelByPhone:r+"/searchParcelByPhone",searchParcelById:r+"/searchParcelByTrackingId",requestOTPEndpoint:i+"/api/msd/password/recover/requestOTP",verifyOTPEndpoint:i+"/api/msd/password/recover/verifyOTP",changePasswordEndpoint:i+"/api/msd/password/recover",loginRequestOTPEndpoint:i+"/api/msd/user/password/change/requestOTP",loginVerifyOTPEndpoint:i+"/api/msd/user/password/change/verifyOTP",loginChangePasswordEndpoint:i+"/api/msd/user/password/change",createPreprintIdEndpoint:i+"/api/msd/qr/preprint/generate",checkPreprintIdEndpoint:i+"/api/msd/qr/preprint/check",registerPreprintIdEndpoint:i+"/api/msd/qr/preprint/register"};n.default=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getParameterByName=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=t.exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkDeliveryStatus=n.searchParcelById=n.searchParcelByPhone=n.state=void 0;var r,i,a,o=n.searchParcelByPhone=(r=m(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/^0\d{9}/g)){e.next=19;break}return e.prev=2,e.next=5,(0,f.generateHeaders)();case 5:return t=e.sent,e.next=8,fetch(v,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"]},body:JSON.stringify({receiver_phone:n})}).then((function(e){return e.json()})).then((function(e){return e}));case 8:r=e.sent,g.allParcelStatus=r.reduce((function(e,n){return e[n.shipmentID]={id:n.shipmentID,status:n.status.toLowerCase()},e}),{}),g.parcels=r.map((function(e){var n=new Date(Date.parse(e.service_date)).toLocaleDateString().split("/");return e.service_date=n[2]+"-"+n[0]+"-"+n[1],e})),g.parcels.length?S():k(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),T(e.t0);case 17:e.next=21;break;case 19:b("Phone number starts with 0 and is in 10 digits!");case 21:case"end":return e.stop()}}),e,this,[[2,14]])}))),function(e){return r.apply(this,arguments)}),s=n.searchParcelById=(i=m(regeneratorRuntime.mark((function e(n){var t,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=/^[eE][xX]\d{13}/g.exec(n))){e.next=23;break}return e.prev=2,e.next=5,(0,f.generateHeaders)();case 5:return r=e.sent,e.next=8,fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"]},body:JSON.stringify({trackingId:t[0]})}).then((function(e){return e.json()})).then((function(e){return e}));case 8:if(i=e.sent,g.parcels=i.map((function(e){var n=new Date(Date.parse(e.service_date)).toLocaleDateString().split("/");return e.service_date=n[2]+"-"+n[0]+"-"+n[1],e})),!g.parcels.length){e.next=15;break}return S(),e.abrupt("return",i);case 15:k();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),T(e.t0);case 21:e.next=25;break;case 23:b("Your tracking ID is invalid!");case 25:case"end":return e.stop()}}),e,this,[[2,18]])}))),function(e){return i.apply(this,arguments)});n.checkDeliveryStatus=(a=m(regeneratorRuntime.mark((function e(){var n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return e.next=3,(0,f.generateHeaders)();case 3:return n=e.sent,e.next=6,fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"]},body:JSON.stringify({trackingId:r})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:if(!(t=e.sent).length){e.next=9;break}return e.abrupt("return",t[0].status.toLowerCase());case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)});n.handleSubmitEvent=function(){document.querySelector("form").onsubmit=function(e){e.preventDefault(),y()}},n.handleInputEvent=function(){document.querySelector("input").oninput=function(e){g.input=e.target.value,document.querySelector("#result_list ul").innerHTML="",g.timeoutId&&clearTimeout(g.timeoutId);var n=setTimeout((function(){y()}),300);g.timeoutId=n}};var c,u=t(12),d=t(13),l=t(1),p=(c=l)&&c.__esModule?c:{default:c},f=t(0);function m(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var v=""+p.default.searchParcelByPhone,h=""+p.default.searchParcelById,g=n.state={input:"",timeoutId:null,parcels:[],allParcelStatus:null};function y(){var e=document.querySelector("input");"receiver_phone"===e.id?o(g.input):"tracking_id"===e.id&&s(g.input)}function b(e){document.querySelector("#result_list ul").innerHTML='\n    <li id="input_error" class="list-group-item" style="color: red; font-weight: bold;"></li>\n    ',document.querySelector("#input_error").innerText=e}function k(){document.querySelector("#result_list ul").innerHTML='\n    <li id="input_error" class="list-group-item" style="color: red; font-weight: bold;"></li>\n    ',document.querySelector("#input_error").innerText='No result from "'+g.input+'"'}function S(){var e=g.parcels.map((function(e){return'\n        <li class="list-group-item">\n            <div class="card" data-shipment-id="'+e.shipmentID+'">\n                <div class="card-body">\n                    <h5 class="card-title">Parcel ID: '+e.shipmentID+'</h5>\n                    <h6 class="card-subtitle mb-2 text-muted">Service Date: '+e.service_date+'</h6>\n                    <h6 class="card-subtitle mb-2 text-muted">Delivery Status: '+e.status+'</h6>\n                    <p class="card-text">'+e.receiver_name+" "+e.receiver_no+'</p>\n                    <p class="card-text">'+e.dropoff_address+", "+e.dropoff_district+", "+e.dropoff_province+" "+e.dropoff_postcode+'</p>\n                    <p class="card-text">'+e.note+"</p>\n                    <div>\n                        "+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&n){var t="",r="";switch(e){case"pending":case"in hub":case"delivering":case"delivering (delay)":case"returning":case"re-deilvering":t="primary";break;case"delivered":case"delivered (delay)":case"returned":t="primary",r="disabled";break;case"canceled":case"failed delivery":case"not found":t="danger",r="disabled";break;default:t="primary"}return'\n        <div class="card-link btn btn-'+t+" "+r+'" data-type="photo">Photo</div>\n        <div class="card-link btn btn-'+t+" "+r+'" data-type="signature">Singature</div>\n        <div class="card-link btn btn-'+t+" "+r+'">\n            <a href="#scanner?id='+n+'">\n                Scan_QR\n            </a>\n        </div>\n        <div class="card-link btn btn-'+t+" "+r+'">\n            <a href="#registerqr?trackingId='+n+'">\n                Pair_ID\n            </a>\n        </div>\n        '}return null}(e.status.trim().toLowerCase(),e.shipmentID)+"\n                    </div>\n                </div>\n            </div>\n        </li>\n        "})).join("");document.querySelector("#result_list ul").innerHTML=e,[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(document.querySelector(".list-group.list-group-flush").children)).forEach((function(e){var n=e.querySelector(".card");e.querySelector("div[data-type=signature]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),(0,u.createSignaturePad)(n.dataset.shipmentId)})),e.querySelector("div[data-type=photo]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),(0,d.createImageUploader)(n.dataset.shipmentId)}))}))}function T(e){var n=document.querySelector("header");n.innerHTML='\n    <div id="warning" class="alert alert-danger" role="alert">\n        Something went wrong: '+e+"\n    </div>\n    ",setTimeout((function(){n.innerHTML=""}),30)}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.userLogin=function(){sessionStorage.clear(),localStorage.clear(),window.location.hash="",i.innerHTML='\n        <div id="login_form">\n            <div id="makesend_logo">\n                <img src="https://www.makesend.asia/wp-content/uploads/2018/06/logo-makesend.png" alt="ms_logo">\n            </div>\n            <form action="" autocomplete="off">\n                <div class="mb-3">\n                    <label for="email" class="form-label">Email</label>\n                    <input type="text" class="form-control" id="email" aria-describedby="emailHelp"\n                        autocomplete="off">\n                    <div class="invalid-feedback">Your email is not correct</div>\n                </div>\n                <div class="mb-3">\n                    <label for="password" class="form-label">Password</label>\n                    <input type="password" class="form-control" id="password">\n                    <div class="invalid-feedback">Your password is not correct</div>\n                </div>\n                <div class="mb-3 form-check">\n                    <input type="checkbox" class="form-check-input" id="remember_me" checked>\n                    <label class="form-check-label" for="remember_me">Remember me</label>\n                </div>\n                <button type="submit" class="btn btn-warning">Login</button>\n                <div>\n                    <a href="#forgetpassword">Forget Password?</a>\n                </div>\n            </form>\n        </div>\n    ';var e=document.querySelector("#login_form"),n=document.querySelector("#email"),t=document.querySelector("#password"),a=document.querySelector("#remember_me");function o(){t.classList.remove("is-invalid"),n.classList.remove("is-invalid")}n.addEventListener("input",o),t.addEventListener("input",o),e.addEventListener("submit",(s=regeneratorRuntime.mark((function e(i){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),o=n.value,s=t.value,o&&s){e.next=9;break}n.classList.add("is-invalid"),t.classList.add("is-invalid"),e.next=17;break;case 9:if(!o||!s){e.next=15;break}return e.next=12,(0,r.loginProcess)(o,s,a.checked);case 12:if(!e.sent){e.next=15;break}return e.abrupt("return");case 15:n.classList.add("is-invalid"),t.classList.add("is-invalid");case 17:case"end":return e.stop()}}),e,this)})),c=function(){var e=s.apply(this,arguments);return new Promise((function(n,t){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));n(s)}("next")}))},function(e){return c.apply(this,arguments)}));var s,c};var r=t(0);var i=document.querySelector(".container")},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.qrScanner=void 0;var r;n.qrScanner=(r=a(regeneratorRuntime.mark((function e(){var n,t,r,s,c,u,d,l,p,f,m,v,h,g,y,b,k,S=(n=a(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(p.style.display="block",v.style.display="block",o.scanning&&(o.video.srcObject.getTracks().forEach((function(e){e.stop()})),o.stream.getTracks().forEach((function(e){e.stop()}))),o.scanning=!1,d.hidden=!0,T(n));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),T=(t=a(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.toString().trim().toLowerCase(),(0,i.actionsToQR)(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),w=(r=a(regeneratorRuntime.mark((function e(){var n,t,r,i,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.style.display="none",v.style.display="none",m.style.display="none",d.hidden=!1,!/iphone|ipad|mac|apple|os\sx/.test(k().toLowerCase())){e.next=24;break}return n=function(){var e=a(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0}).then(function(){var e=a(regeneratorRuntime.mark((function e(t){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(!(r=e.sent).length){e.next=12;break}return i=r.filter((function(e){return"videoinput"===e.kind})),a=f.value,f.innerHTML="",i.forEach((function(e,n){console.log(e);var t=document.createElement("option");t.value=e.deviceId,t.text=e.label||"camera "+(n+1),f.appendChild(t)})),f.value=a,e.abrupt("return",r);case 12:g(),console.log("trigger");case 14:case"end":return e.stop()}}),e,n)})));return function(n){return e.apply(this,arguments)}}()).catch(g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.prev=6,o.stream&&o.stream.getTracks().forEach((function(e){e.stop()})),e.next=10,n();case 10:t=e.sent,r=t.filter((function(e){return"videoinput"===e.kind&&/(back|rear)/g.test(e.label.toLowerCase())})),i={},s=f.value,i=r.length?{video:{deviceId:s?{exact:s}:r[r.length-1].deviceId}}:{video:{deviceId:{exact:void 0}}},console.log(i),navigator.mediaDevices.getUserMedia(i).then(h).then(x).catch(g),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),g(e.t0);case 22:e.next=25;break;case 24:try{if(o.stream&&o.stream.getTracks().forEach((function(e){e.stop()})),c=f.value,u=null,o.rearCameras.length)u={video:{deviceId:c?{exact:c}:{exact:o.rearCameras[o.rearCameras.length-1].deviceId}}},navigator.mediaDevices.getUserMedia(u).then(h).then(x).catch(g);else{u={video:{deviceId:void 0}};try{u={video:{facingMode:"environment"}},navigator.mediaDevices.getUserMedia(u).then(h).then(x).catch(g)}catch(e){console.log("no rear camera"),u={video:!0},navigator.mediaDevices.getUserMedia(u).then(h).then(x).catch(g)}}console.log(u)}catch(e){console.log(e)}case 25:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(){return r.apply(this,arguments)}),x=(s=a(regeneratorRuntime.mark((function e(){var n,t,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices().then((function(e){return e})).catch((function(e){return e}));case 2:if(n=e.sent,!(t=n.filter((function(e){return"videoinput"===e.kind}))).length){e.next=14;break}return r=f.value,f.innerHTML="",t.forEach((function(e,n){var t=document.createElement("option");t.value=e.deviceId,t.text=e.label||"camera "+(n+1),f.appendChild(t)})),f.value=r,i=n.filter((function(e){return/(back|rear)/g.test(e.label.toLowerCase())})),o.rearCameras=i,e.abrupt("return",n);case 14:g("This device has no available camera");case 15:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)});return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k=function(){var e=navigator.userAgent.match(/\((.*?)\)/g)[0];return e=e.slice(1,e.length-1)},b=function e(){try{qrcode.decode()}catch(n){setTimeout(e,300)}},y=function e(){o.scanning&&(d.height=o.video.videoHeight,d.width=o.video.videoWidth,l.drawImage(o.video,0,0,d.width,d.height),o.scanning&&requestAnimationFrame(e))},g=function(e){var n="<h1>App can't start camera because </h1>\n            <p>\""+e+'"</p>\n            <div id="refresh_page" class="btn btn-light" style="margin: 0 auto;">Reload Page</div>';document.querySelector("#qrcode_scanner").innerHTML=n,document.querySelector("#refresh_page").addEventListener("click",(function(e){e.stopPropagation(),location.reload()})),console.log(e)},h=function(e){o.stream=e,o.scanning=!0,o.video.setAttribute("playsinline",!0),o.video.srcObject=e,o.video.play(),y(),b()},(c=document.querySelector("header")).style.display="block",c.innerHTML='\n        <div id="header">QR Reader</div>\n    ',(u=document.querySelector(".container")).style.justifyContent="space-between",u.innerHTML='\n        <div id="qrcode_scanner">\n            <div id="videoSelect">\n                <label for="videoSource">Change Camera</label>\n                <select id="videoSource" class="custom-select"></select>\n            </div>\n            <canvas id="qr-canvas" hidden></canvas>\n            <div id="qr-result">\n                <b>Result: </b>\n                <p id="output_data">https://app.makesend.asia/tracking?t=PP2103151042875</p>\n                <p id="parcel_status">Status: <span>pending</span></p>\n            </div>\n            <div id="actionToResult">\n                <a href="#" class="btn btn-primary">action</a>\n                <hr>\n            </div>\n            <div id="startScanBtn">\n                <label>\n                    <img src="https://uploads.sitepoint.com/wp-content/uploads/2017/07/1499401426qr_icon.svg">\n                    <p>Scan Again</p>\n                </label>\n            </div>\n        </div>\n    ',o.video=document.createElement("video"),(d=document.querySelector("#qr-canvas")).width=d.offsetHeight/3*4,l=d.getContext("2d"),p=document.querySelector("#qr-result"),f=document.querySelector("#videoSource"),m=document.querySelector("#actionToResult"),v=document.querySelector("#startScanBtn"),f.onchange=w,e.next=22,x();case 22:return e.next=24,w();case 24:qrcode.callback=S,v.onclick=w;case 27:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)});n.stopStream=function(){if(o.scanning){o.video&&o.video.srcObject.getTracks().forEach((function(e){e.stop()})),o.stream&&o.stream.getTracks().forEach((function(e){e.stop()})),o.scanning=!1,o.video=null,o.stream=null,document.querySelector("#qr-canvas").hidden=!0}};var i=t(6);function a(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var o={rearCameras:[],cameras:[],appleDevice:null,scanning:!1,video:null,stream:null}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.preprintIdCreator=n.registerPreprintId=n.checkPreprintId=n.checkParcelStatus=n.actionsToQR=void 0;n.actionsToQR=(r=g(regeneratorRuntime.mark((function e(){var n,t,r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/.?(([Ee][Xx]|[Ss][Tt]|[Pp]{2})\d{13}).?/g.exec(a),t=document.querySelector("#output_data"),(r=document.querySelector("#parcel_status")).innerHTML="",!n){e.next=11;break}return i=n[1].toUpperCase(),a.includes("http")?t.innerHTML="\n            Parcel ID: <a href="+a+">"+i+"</a>\n            ":t.innerText=i,e.next=9,d(i,r);case 9:e.next=12;break;case 11:a.includes("http")||a.includes("www")?t.innerHTML="\n           <a href="+a+">"+a+"</a>\n        ":t.innerText=a;case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)});var r,i,a,o,s,c,u,d=(i=g(regeneratorRuntime.mark((function e(){var n,t,r,i,a,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=32;break}if(n=document.querySelector("#output_data"),t=(0,h.getParameterByName)("id"),(r=document.querySelector("#actionToResult")).style.display="block",i=r.querySelector("a"),!s.includes("ST")){e.next=11;break}i.setAttribute("href","#search?id="+s),i.innerText="Update Delivery Status",e.next=32;break;case 11:if(!s.includes("PP")){e.next=26;break}return e.next=14,p(s);case 14:if(200!==(a=e.sent).resCode||!a.registered){e.next=23;break}return e.next=18,l(a.trackingID);case 18:y(e.sent.status.toLowerCase(),a.trackingID,c,i),e.next=24;break;case 23:200===a.resCode?(o=t?"&trackingId="+t:"",i.setAttribute("href","#registerqr?id="+s+o),i.innerText="Register Parcel",o&&o.includes("EX")&&(window.location.hash="#registerqr?id="+s+o)):(console.log(a.message),alert(a.message),n.innerText="Invalid Tracking ID "+s,r.style.display="none");case 24:e.next=32;break;case 26:if(!s.includes("EX")){e.next=32;break}return e.next=29,l(s);case 29:y(e.sent.status.toLowerCase(),s,c,i);case 32:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),l=n.checkParcelStatus=(a=g(regeneratorRuntime.mark((function e(){var n,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=/.?(([Ee][Xx]|[Ss][Tt]|[Pp]{2})\d{13}).?/g.exec(i)[1].toUpperCase())){e.next=9;break}return e.next=4,(0,v.generateHeaders)();case 4:return t=e.sent,e.next=7,fetch(m.default.searchParcelById,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"]},body:JSON.stringify({trackingId:n})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 7:return r=e.sent,e.abrupt("return",{trackingId:r[0].shipmentID,status:r[0].status});case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),p=n.checkPreprintId=(o=g(regeneratorRuntime.mark((function e(){var n,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=10;break}return n=localStorage.getItem("token"),e.next=4,(0,v.generateHeaders)();case 4:return t=e.sent,e.next=7,fetch(m.default.checkPreprintIdEndpoint,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","User-Token":""+n,"Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"]},body:JSON.stringify({qr:i})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 7:return r=e.sent,console.log(r),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),f=(n.registerPreprintId=(s=g(regeneratorRuntime.mark((function e(){var n,t,r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,(0,v.generateHeaders)();case 3:return t=e.sent,e.next=6,p(a);case 6:if(200!==(r=e.sent).resCode||r.registered){e.next=13;break}return e.next=10,fetch(m.default.registerPreprintIdEndpoint,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","User-Token":""+n,"Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"]},body:JSON.stringify({qr:a,trackingID:o})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 10:return i=e.sent,console.log(i),e.abrupt("return",i);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),n.preprintIdCreator=(c=g(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,(0,v.generateHeaders)();case 3:return t=e.sent,e.next=6,fetch(m.default.createPreprintIdEndpoint,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"],"User-Token":""+n}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),t(1)),m=(u=f)&&u.__esModule?u:{default:u},v=t(0),h=t(2);function g(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!(e&&n&&r&&t))return null;t.innerText="Status: "+e,"pending"===e?(r.setAttribute("href","#search/trackingid?id="+n),r.innerText="Update Delivery Status"):"delivered"===e?(r.setAttribute("href",m.default.appEndpoint+"/tracking?t="+n),r.innerText="Check Parcel POD"):(r.setAttribute("href","#search/trackingid?id="+n),r.innerText="Search Parcel")}},function(e,n,t){"use strict";var r=t(4),i=t(8),a=t(9),o=t(0),s=t(10),c=t(11),u=t(5),d=t(14),l=t(16),p=t(17),f=t(18),m=t(19);function v(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}window.onload=v(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("token")||sessionStorage.getItem("token"))){e.next=8;break}return e.next=4,(0,o.checkToken)(n);case 4:e.sent?(window.location.hash="search/phone",(0,a.showheaders)(),(0,i.navigators)("search"),(0,c.searchFeatures)()):(0,r.userLogin)(),e.next=9;break;case 8:(0,r.userLogin)();case 9:window.onhashchange=v(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.location.hash.toLowerCase(),console.log("path changes! "+n),e.next=4,(0,o.checkToken)();case 4:if(t=e.sent,(0,u.stopStream)(),(0,a.hideHeaders)(),(0,l.resetPasswordState)(),!t){e.next=12;break}n.includes("#dashboard")?window.location.hash="search/phone":n.includes("#scanner")?((0,i.navigators)("scanner"),(0,u.qrScanner)()):n.includes("#search")?((0,i.navigators)("search"),(0,c.searchFeatures)()):n.includes("#tasks")?(0,i.navigators)("tasks"):n.includes("#setting")?n.includes("userprofile")?(0,p.userProfileSetting)():n.includes("resetpassword")?(0,l.resetPassword)():n.includes("about")?(0,f.aboutDriverApp)():((0,i.navigators)("setting"),(0,d.userSetting)()):n.includes("#registerqr")?(0,m.qrRegister)():window.location.hash="",e.next=18;break;case 12:e.t0=window.location.hash,e.next="#forgetpassword"===e.t0?15:17;break;case 15:return(0,s.forgetPassword)(),e.abrupt("break",18);case 17:(0,r.userLogin)();case 18:case"end":return e.stop()}}),e,this)})));case 10:case"end":return e.stop()}}),e,this)})))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.navigators=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dashboard",n=document.querySelector(".container"),t=document.querySelector("footer");n.innerHTML="",t.innerHTML='\n        <div class="navigator">\n            <div>\n                <a href="#scanner" class="" id="navi_scanner">\n                    <i class="fas fa-qrcode"></i>\n                    <span>Scan</span>\n                </a>\n            </div>\n            <div>\n                <a href="#search" class="" id="navi_search">\n                    <i class="fas fa-search"></i>\n                    <span>Search</span>\n                </a>\n            </div>\n            <div>\n                <a href="#tasks" class="" id="navi_tasks">\n                    <i class="fas fa-tasks"></i>\n                    <span>Tasks</span>\n                </a>\n            </div>\n            <div>\n                <a href="#setting" class="" id="navi_setting">\n                    <i class="fas fa-cog"></i>\n                    <span>Setting</span>\n                </a>\n            </div>\n        </div>\n    ',r(e)};t(5);function r(e){var n=document.querySelector("#navi_scanner"),t=document.querySelector("#navi_search"),r=document.querySelector("#navi_tasks"),i=document.querySelector("#navi_setting");switch([r,t,n,i].forEach((function(e){e.classList.remove("selected")})),e){case"dashboard":t.classList.add("selected");break;case"scanner":n.classList.add("selected");break;case"tasks":r.classList.add("selected");break;case"setting":i.classList.add("selected");break;default:t.classList.add("selected")}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.showheaders=function(){document.querySelector("header").style.display="block"},n.hideHeaders=function(){document.querySelector("header").style.display="none"}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,a,o,s=(r=v(regeneratorRuntime.mark((function e(){var n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(n=e.sent,!a){e.next=8;break}return e.next=6,fetch(f.default.changePasswordEndpoint,{method:"post",mod:"cors",headers:{"Content-Type":"application/json","Client-Token":n.clientToken,"Time-Stamp":n.timeStamp,"Time-Signature":n.timeSignature},body:JSON.stringify({otp:r,ref:i,password:a,confirmPassword:o})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:return t=e.sent,e.abrupt("return",t);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),c=(i=v(regeneratorRuntime.mark((function e(){var n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(n=e.sent,!r||!i){e.next=8;break}return e.next=6,fetch(f.default.verifyOTPEndpoint,{method:"post",mod:"cors",headers:{"Content-Type":"application/json","Client-Token":n.clientToken,"Time-Stamp":n.timeStamp,"Time-Signature":n.timeSignature},body:JSON.stringify({otp:r,ref:i})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:return t=e.sent,e.abrupt("return",t);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),u=(a=v(regeneratorRuntime.mark((function e(){var n,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(n=e.sent,!(t=/[06](\d{9})/g.exec(i))){e.next=9;break}return e.next=7,fetch(f.default.requestOTPEndpoint,{method:"post",mod:"cors",headers:{"Content-Type":"application/json","Client-Token":n.clientToken,"Time-Stamp":n.timeStamp,"Time-Signature":n.timeSignature},body:JSON.stringify({phone:"+66"+t[1]})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 7:return r=e.sent,e.abrupt("return",r);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),d=(o=v(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={clientToken:"",timeStamp:"",timeSignature:""},e.next=3,(0,m.generateHeaders)();case 3:if(!(t=e.sent)){e.next=9;break}return n.clientToken=t["Client-Token"],n.timeStamp=t["Time-Stamp"],n.timeSignature=t["Time-Signature"],e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)});n.forgetPassword=function(){document.querySelector(".container").innerHTML='\n    <div id="login_form">\n        <div id="makesend_logo">\n            <img src="https://www.makesend.asia/wp-content/uploads/2018/06/logo-makesend.png" alt="ms_logo">\n        </div>\n        <h1>Reset Password</h1>\n        <hr>\n        <div id="phone_otp_input">\n        </div>\n        <hr>\n        <div id="backToLogin">\n            <a class="btn btn-primary" href="#">Back to Login</a>\n        </div>\n    </div>\n    ';var e=document.querySelector("#phone_otp_input");if(e){var n='\n        <form action="" method="post" id="submit_phone">\n            <label for="driver_phone" class="form-label">Please enter your phone</label>\n            <div>\n                <input class="form-control" id="driver_phone" type="tel" name="receiver_phone" value=""\n                    inputmode="numeric" placeholder="#0632166699" autocomplete="off" pattern="[0-9]{10}">\n                <button type="submit"><i class="fa fa-search"></i></button>\n                <div id="error_hint" class="invalid-feedback">Phone number starts with 0 and has 10 digits!</div>\n            </div>\n        </form>\n        ';e.innerHTML=n;var t=e.querySelector("#submit_phone");if(e&&t){var r=(i=v(regeneratorRuntime.mark((function t(i){var a,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.stopPropagation(),i.preventDefault(),(a=i.target.querySelector("input")).oninput=function(){this.classList.remove("is-invalid")},o=a.value,!/^0\d{9}/g.test(o)){t.next=13;break}return e.innerHTML='\n        <div id="otp_loader">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',t.next=9,u(o);case 9:200===(s=t.sent).resCode?(console.log(s),h.ref=s.otpRef,h.driverPhone=o,h.timeStamp=(new Date).getTime(),e.innerHTML=b(h.driverPhone),g(),y()):(e.innerHTML=n,e.querySelector("#submit_phone").onsubmit=r,console.log(s.message),alert(s.message)),t.next=14;break;case 13:a.classList.add("is-invalid");case 14:case"end":return t.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)});t.onsubmit=r}}var i};var l,p=t(1),f=(l=p)&&l.__esModule?l:{default:l},m=t(0);function v(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var h={otp:"",ref:"",pending:60,driverPhone:null,timeStamp:0,countdownTimer:null};function g(){h.countdownTimer&&clearTimeout(h.countdownTimer);var e=document.querySelector("#countdown");if(e){var n=(new Date).getTime(),t=h.pending,r=Math.floor((n-h.timeStamp)/1e3);if(r>=60?t=0:r<60&&60!==t&&(t=60-r),t>0)h.pending=t-1,e.innerText=h.pending,h.countdownTimer=setTimeout((function(){g(h.pending)}),1e3);else{var i=document.querySelector("#insert_otp button");i.removeAttribute("disabled"),e.parentNode.innerHTML="",i.onclick=function(e){e.preventDefault(),h.pending=60,i.setAttribute("disabled",!0),document.querySelector("#insert_otp button span").innerHTML='(<span id="countdown">'+h.pending+"</span> sec)",g(h.pending)}}}}function y(){var e=document.querySelector("#phone_otp_input"),n=document.querySelector(".digit-group").querySelectorAll("input");n.length&&(n[0].focus(),n.forEach((function(n){var t,r;n.onchange=(t=v(regeneratorRuntime.mark((function n(t){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.parentNode,i=t.target.value,document.querySelector("#invalid_otp").innerText="",!i){n.next=9;break}(a=r.querySelector("input#"+this.dataset.next))&&a.focus(),n.next=23;break;case 9:if(i){n.next=14;break}(o=r.querySelector("input#"+this.dataset.previous))&&o.focus(),n.next=23;break;case 14:if(h.otp="",formTag.querySelectorAll("input").forEach((function(e){h.otp+=e.value})),4!==h.otp.length){n.next=23;break}return s=h.otp,e.innerHTML='\n        <div id="otp_loader">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',n.next=21,c(s,h.ref);case 21:200===(u=n.sent).resCode?(console.log(u),k()):(e.innerHTML=b(h.driverPhone,h.pending),document.querySelector("#invalid_otp").innerText="Invalid OTP Code!",y(),g());case 23:case"end":return n.stop()}}),n,this)}))),function(e){return t.apply(this,arguments)}),n.onkeyup=(r=v(regeneratorRuntime.mark((function n(t){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.parentNode,i=r.parentNode,document.querySelector("#invalid_otp").innerText="",8!==t.keyCode&&37!==t.keyCode){n.next=9;break}(a=r.querySelector("input#"+this.dataset.previous))&&a.focus(),n.next=24;break;case 9:if(!(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90||t.keyCode>=96&&t.keyCode<=105||39===t.keyCode)){n.next=24;break}if(!(o=r.querySelector("input#"+this.dataset.next))){n.next=15;break}o.focus(),n.next=24;break;case 15:if(h.otp="",i.querySelectorAll("input").forEach((function(e){h.otp+=e.value})),4!==h.otp.length){n.next=24;break}return s=h.otp,e.innerHTML='\n        <div id="otp_loader">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',n.next=22,c(s,h.ref);case 22:200===(u=n.sent).resCode?(console.log(u),k()):(e.innerHTML=b(h.driverPhone,h.pending),document.querySelector("#invalid_otp").innerText="Invalid OTP Code!",y(),g());case 24:case"end":return n.stop()}}),n,this)}))),function(e){return r.apply(this,arguments)})})))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return'\n    <form class="digit-group" data-group-name="digits" autocomplete="off" id="insert_otp">\n        <div>\n            <h3>Enter OTP Code</h3>\n            <h3>Phone: '+e+'</h3>\n        </div>\n        <div>\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-1" name="digit-1" data-next="digit-2" maxlength="1" />\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-2" name="digit-2" data-next="digit-3" data-previous="digit-1"\n                maxlength="1" />\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-3" name="digit-3" data-next="digit-4" data-previous="digit-2"\n                maxlength="1" />\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-4" name="digit-4" data-previous="digit-3" maxlength="1" />\n        </div>\n        <div id="invalid_otp"></div>\n        <div>\n            <button class="btn btn-warning" type="submit" disabled>Request OTP <span>(<span id="countdown">'+n+"</span> sec)</span></button>\n        </div>\n    </form>\n    "}function k(){document.querySelector("#phone_otp_input").innerHTML='\n        <form action="" autocomplete="off" id="reset_password_form">\n            <div class="mb-3">\n                <label for="password" class="form-label">New Password</label>\n                <input type="password" class="form-control" id="password" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div class="mb-3">\n                <label for="password_repeat" class="form-label">Confirm password</label>\n                <input type="password" class="form-control" id="password_repeat" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div>\n                <button type="submit" class="btn btn-warning">Reset Password</button>\n            </div>\n        </form>\n    ';var e,n=document.querySelector("#reset_password_form"),t=n.querySelector("button"),r=[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n.querySelectorAll("input")));r.forEach((function(e){e.oninput=function(){r.forEach((function(e){e.classList.remove("is-invalid")}))}})),t.onclick=(e=v(regeneratorRuntime.mark((function e(n){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),(t=r.map((function(e){return e.value?e.value:null})))[0]!==t[1]||!t[0]){e.next=9;break}return e.next=5,s(h.otp,h.ref,t[0],t[1]);case 5:200===(i=e.sent).resCode?(alert(i.message),window.location.hash=""):(console.log(i.message),alert(i.message)),e.next=10;break;case 9:r.forEach((function(e){e.classList.add("is-invalid")}));case 10:case"end":return e.stop()}}),e,this)}))),function(n){return e.apply(this,arguments)})}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.searchFeatures=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">Search parcel</div>\n    ';var n='\n    <form action="">\n        <input class="form-control" id="receiver_phone" type="tel" name="receiver_phone" value=""\n            inputmode="numeric" placeholder="#0632166699" autocomplete="off" pattern="[0-9]{10}">\n        <button type="submit"><i class="fa fa-search"></i></button>\n    </form>\n    ',t=n,o=window.location.hash.split("?")[0];a.id=(0,i.getParameterByName)("id"),a.parcelId=(0,i.getParameterByName)("parcelId"),a.phone=(0,i.getParameterByName)("phone");var s="warning",c="dark";o.includes("trackingid")?(t='\n    <form action="" class="form-group">\n        <input class="form-control" id="tracking_id" type="text" name="tracking_id" value=""\n            placeholder="#EX1234567890123" autocomplete="off">\n        <button type="submit"><i class="fa fa-search"></i></button>        \n    </form>\n    ',s="dark",c="warning"):t=n;var u=document.querySelector(".container");if(u.style.justifyContent="space-between",u.innerHTML='\n    <div id="search_parcel">\n        <div id="search_functions">\n            <div id="search_by_phone_btn" class="btn btn-'+s+'">Receiver Phone</div>\n            <div id="search_by_tracking_id_btn" class="btn btn-'+c+'">Tracking ID</div>\n        </div>\n        <div id="search_list">\n            <div id="search_bar">\n                '+t+'\n            </div>            \n        </div>\n        <div id="search_filters">\n        </div>\n        <div id="result_list">\n            <ul class="list-group list-group-flush">\n                <li class="list-group-item">Please search parcel by <br> <b>Receiver Phone</b> or <br> <b>Tracking ID</b></li>\n            </ul>\n        </div>\n    </div>\n    ',(0,r.handleSubmitEvent)(),(0,r.handleInputEvent)(),a.id){document.querySelector("#search_bar").querySelector("input").value=a.id,(0,r.searchParcelById)(a.id)}else if(a.phone){document.querySelector("#search_bar").querySelector("input").value=a.phone,(0,r.searchParcelByPhone)(a.phone)}var d=document.querySelector("#search_by_phone_btn"),l=document.querySelector("#search_by_tracking_id_btn");function p(e){var n=this;e.stopPropagation(),[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(this.parentNode.children)).forEach((function(e){e===n?(e.classList.add("btn-warning"),e.classList.remove("btn-dark")):(e.classList.add("btn-dark"),e.classList.remove("btn-warning"))})),"search_by_tracking_id_btn"===this.id?(document.querySelector("#search_by_tracking_id_btn").classList.add("btn-warning"),document.querySelector("#search_by_phone_btn").classList.add("btn-dark"),window.location.hash="search/trackingid"):"search_by_phone_btn"===this.id&&(window.location.hash="search/phone"),document.querySelector("#result_list ul").innerHTML='<li class="list-group-item">Please search parcel by <br> <b>Receiver Phone</b> or <br> <b>Tracking ID</b></li>',(0,r.handleSubmitEvent)(),(0,r.handleInputEvent)()}d.addEventListener("click",p),l.addEventListener("click",p)};var r=t(3),i=t(2);var a={id:null,phone:"",parcelId:null}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createSignaturePad=function(e){var n=document.querySelector("footer");n.remove();var t=document.querySelector(".container"),r=document.createElement("div");r.className="modal-dialog modal-dialog-scrollable update-pod",r.innerHTML='\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalScrollableTitle">Tracking ID: '+e+'</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div id="signature_upload" class="signature-pad">\n                <div class="signature-pad--body">\n                    <canvas id="signature_canvas">This browser doesn\'t support canvas</canvas>\n                </div>\n                <div class="signature-pad--footer">\n                    <div class="description">Sign above</div>\n                    <div class="signature-pad--actions">\n                        <div>\n                            <button type="button" class="button clear" data-action="clear">Clear</button>\n                            <button type="button" class="button" data-action="undo">Undo</button>\n                        </div>\n                        <div>\n                            <button type="button" class="button save" data-action="save-png">Save\n                                as\n                                PNG</button>\n                            <button type="button" class="button save" data-action="save-jpg">Save\n                                as\n                                JPG</button>                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            <button type="button" class="btn btn-primary" data-action="upload-signature">Upload</button>\n        </div>\n    </div>\n    ';t.appendChild(r);var o=r.querySelector("[data-action=clear]"),s=r.querySelector("[data-action=undo]"),d=r.querySelector("[data-action=save-png]"),l=r.querySelector("[data-action=save-jpg]"),p=r.querySelector("#signature_canvas"),f=new SignaturePad(p,{backgroundColor:"rgb(255, 255, 255)"});function m(){p.width=p.offsetWidth,p.height=p.offsetHeight,p.getContext("2d"),f.clear()}function v(e,n){var t=function(e){for(var n=e.split(";base64,"),t=n[0].split(":")[1],r=window.atob(n[1]),i=r.length,a=new Uint8Array(i),o=0;o<i;++o)a[o]=r.charCodeAt(o);return new Blob([a],{type:t})}(e),r=window.URL.createObjectURL(t),i=document.createElement("a");i.style="display: none",i.href=r,i.download=n,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r)}function h(){r.remove(),t.insertAdjacentElement("afterend",n)}window.addEventListener("resize",m),m(),o.addEventListener("click",(function(e){f.clear()})),s.addEventListener("click",(function(e){var n=f.toData();n&&(n.pop(),f.fromData(n))})),d.addEventListener("click",(function(e){f.isEmpty()?alert("Please provide a signature first."):v(f.toDataURL(),"signature.png")})),l.addEventListener("click",(function(e){f.isEmpty()?alert("Please provide a signature first."):v(f.toDataURL("image/jpeg"),"signature.jpg")})),t.querySelector("[data-action=upload-signature]").onclick=(g=regeneratorRuntime.mark((function n(t){var r,o,s,d,l,p,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=f.toDataURL("image/jpeg"),!(o=(0,i.userToken)())){n.next=25;break}return n.next=5,(0,i.generateHeaders)();case 5:return s=n.sent,n.next=8,fetch(u,{method:"post",headers:{"Content-Type":"application/json","User-Token":""+o,"Client-Token":s["Client-Token"],"Time-Stamp":s["Time-Stamp"],"Time-Signature":s["Time-Signature"]},body:JSON.stringify({trackingID:e,type:"signature",PODImage:[r],fileName:"signatuer_"+e})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return alert(e)}));case 8:if(200!==(d=n.sent).resCode||!d.result.length){n.next=20;break}return l="upload signature for "+e+" success!",n.next=13,(0,c.checkDeliveryStatus)(e);case 13:p=n.sent,console.log(c.state),c.state[e]!==p&&(/^\d{10}$/g.test(c.state.input)?(0,c.searchParcelByPhone)(c.state.input):/^[eE][xX]\d{13}$/g.test(c.state.input)&&(0,c.searchParcelById)(c.state.input)),alert(l),h(),n.next=23;break;case 20:m="Error! Upload signature for "+e+" failed!",console.log(m),alert(m);case 23:n.next=27;break;case 25:alert("token is invalid!"),(0,a.userLogin)();case 27:case"end":return n.stop()}}),n,this)})),y=function(){var e=g.apply(this,arguments);return new Promise((function(n,t){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));n(s)}("next")}))},function(e){return y.apply(this,arguments)}),t.querySelector(".modal-header button").onclick=h,t.querySelector(".modal-footer button").onclick=h;var g,y};var r,i=t(0),a=t(4),o=t(1),s=(r=o)&&r.__esModule?r:{default:r},c=t(3);var u=s.default.uploadEndpoint},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createImageUploader=function(e){var n=(r=c(regeneratorRuntime.mark((function n(){var t,r,a,o,c,d,l,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],m=arguments[1];return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,i.userToken)(),n.next=3,(0,i.generateHeaders)();case 3:if(r=n.sent,!t){n.next=27;break}return n.next=7,fetch(u,{method:"post",headers:{"Content-Type":"application/json","User-Token":""+t,"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"]},body:JSON.stringify({trackingID:e,type:"image",PODImage:f,fileName:"pod_"+e+"_"+(new Date).toISOString()})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return alert(e)}));case 7:if(200!==(a=n.sent).resCode||!a.result.length){n.next=22;break}return o=a.result.length>1?"images":"image",c="upload "+a.result.length+" "+o+" for "+e+" success!",n.next=13,(0,s.checkDeliveryStatus)(e);case 13:d=n.sent,console.log(s.state),s.state[e]!==d&&(/^\d{10}$/g.test(s.state.input)?(0,s.searchParcelByPhone)(s.state.input):/^[eE][xX]\d{13}$/g.test(s.state.input)&&(0,s.searchParcelById)(s.state.input)),console.log(c),alert(c),m.clearPreviewPanel(),p(),n.next=25;break;case 22:l="upload image for "+e+" failed",console.log(l),alert(l);case 25:n.next=29;break;case 27:alert("token is invalid!"),userLogin();case 29:case"end":return n.stop()}}),n,this)}))),function(){return r.apply(this,arguments)}),t=document.querySelector("footer");var r;t.remove();var a=document.querySelector(".container"),o=document.createElement("div");o.className="modal-dialog modal-dialog-scrollable update-pod",o.innerHTML='\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalScrollableTitle">Tracking ID: '+e+'</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div id="photo_upload">\n                <div class="custom-file-container" data-upload-id="imageUploader">\n                    <div class="image-upload-btns">\n                        <label class="custom-file-container__custom-file card shadow bg-white roundedcard shadow bg-white rounded">\n                            <div id="photo_btn">\n                                <img src="https://img.icons8.com/plasticine/camera.png" alt="photo_button">\n                                <p>Take a photo</p>\n                            </div>\n                            <input type="file" class="custom-file-container__custom-file__custom-file-input"\n                                accept="image/jpeg, image/png, image/gif" multiple aria-label="Choose File" style="display:none" />\n                            <input type="hidden" name="MAX_FILE_SIZE" value="10485760" style="display:none" />\n                            <span class="custom-file-container__custom-file__custom-file-control" style="display:none"></span>\n                        </label>\n                        \n                    </div>\n                    <div class="custom-file-container__image-preview"></div>\n                    <label><span>Remove All Photos</span>\n                            <a href="javascript:void(0)" class="custom-file-container__image-clear"\n                                title="Clear Image">&times;</a>\n                        </label>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            <button type="button" class="btn btn-primary" data-action="upload-image">Upload</button>\n        </div>\n    </div>\n    ',a.appendChild(o);var l=new FileUploadWithPreview("imageUploader");function p(){o.remove(),a.insertAdjacentElement("afterend",t)}a.querySelector("[data-action=upload-image]").onclick=(f=c(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=l.cachedFileArray).length&&r.forEach((function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var t=document.createElement("img");t.src=e.target.result,t.onload=function(e){var t=document.createElement("canvas"),i=400/e.target.width;t.width=400,t.height=e.target.height*i;var a=t.getContext("2d");a.drawImage(e.target,0,0,t.width,t.height);var o=a.canvas.toDataURL(e.target,"image/jpeg",.92);d.compressedFiles.push(o),d.compressedFiles.length===r.length&&n(d.compressedFiles,l)}}}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)}),a.querySelector(".modal-header button").onclick=p,a.querySelector(".modal-footer button").onclick=p;var f};var r,i=t(0),a=t(1),o=(r=a)&&r.__esModule?r:{default:r},s=t(3);function c(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var u=o.default.uploadEndpoint,d={files:[],compressedFiles:[]}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.userSetting=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">SETTINGS</div>\n    ',document.querySelector(".container").innerHTML='\n        <div id="setting">\n            <div id="search_setting">\n                <form action="">\n                    <input id="search_input" type="text" name="search_input" value="" placeholder="Search Setting...">\n                    <button type="submit"><i class="fa fa-search"></i></button>\n                </form>\n            </div>\n            <div id="setting_list">\n                <h3>Account Setting</h3>                        \n                <ul class="list-group list-group-flush">\n                <li class="list-group-item">\n                    <a href="#setting/userprofile">\n                        <div>\n                            <i class="fas fa-user"></i>\n                        </div>\n                        <div>User Profile</div>\n                        <div>\n                            <i class="fas fa-greater-than"></i>\n                        </div>\n                    </a>\n                </li>\n                <li class="list-group-item">\n                    <a href="#setting/resetpassword">\n                        <div>\n                            <i class="fas fa-lock"></i>\n                        </div>\n                        <div>Reset Password</div>\n                        <div>\n                            <i class="fas fa-greater-than"></i>\n                        </div>\n                    </a>\n                </li>\n                <li class="list-group-item">\n                    <a href="#setting/about">\n                        <div>\n                            <i class="fas fa-question-circle"></i>\n                        </div>\n                        <div>About</div>\n                        <div>\n                            <i class="fas fa-greater-than"></i>\n                        </div>\n                    </a>\n                </li>\n                </ul>\n            </div>\n            <div>\n                <div id="logout_btn" class="btn btn-secondary">\n                    <div><i class="fas fa-sign-out-alt"></i></div>\n                    <div>Logout</div>\n                </div>\n            </div>\n        </div>\n    ';var n=document.querySelector("#logout_btn");(0,r.userLogout)(n)};var r=t(15)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.userLogout=function(e){var n=document.querySelector("footer"),t=document.querySelector(".container");e.onclick=function(e){e.stopPropagation(),sessionStorage.clear(),localStorage.clear(),n.innerHTML="",t.style.justifyContent="center",window.location.hash=""}},n.user_logout_legacy=function(){var e=document.querySelector("#navi_logout"),n=document.querySelector("body"),t=document.querySelector("footer");e.addEventListener("click",(function(e){e.stopPropagation(),sessionStorage.clear(),localStorage.clear(),t.innerHTML="",n.style.backgroundColor="rgba(0, 0, 0, 0.1)",document.querySelector(".container").style.justifyContent="center",window.location.hash=""}))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resetPasswordState=function(){c.otp="",c.ref="",c.pending=60,c.timeStamp=0,c.countdownTimer=null,c.redirectCountdownTimer=null,c.step=1},n.resetPassword=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n    <div id="header">reset password</div>\n    ',document.querySelector("#setting").innerHTML='\n        <div>\n            <div class="progress-container">\n                <div class="progress" id="progress"></div>\n                <div class="circle active">\n                    1\n                </div>\n                <div class="circle">\n                    2\n                </div>\n                <div class="circle">\n                    3\n                </div>\n                <div class="circle">\n                    4\n                </div>\n            </div>\n            <h1>Request OTP</h1>\n        </div>\n        <div id="phone_otp_input_login">\n            <button class="btn btn-warning">Request OTP <span></span></button>\n        </div>\n        <div>\n            <a href="#setting" class="btn btn-primary">Back To Setting</a>\n        </div>\n        ',function(){u(c.step);var e=document.querySelector("#phone_otp_input_login"),n=e.querySelector("button");if(e&&n){var t=(r=s(regeneratorRuntime.mark((function n(t){var r,a,s,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.stopPropagation(),e.innerHTML='\n        <div id="otp_loader_login">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',n.next=4,(0,i.generateHeaders)();case 4:return r=n.sent,a=(0,i.userToken)(),s={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+a,"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"]}},n.next=9,fetch(o.default.loginRequestOTPEndpoint,s).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 9:200===(p=n.sent).resCode?(c.ref=p.otpRef,c.timeStamp=(new Date).getTime(),e.innerHTML=v(),c.step+=1,u(c.step),d(),l()):(console.log(p.message),alert(p.message),window.location.hash="setting");case 11:case"end":return n.stop()}}),n,this)}))),function(e){return r.apply(this,arguments)});n.onclick=t}var r}()};var r,i=t(0),a=t(1),o=(r=a)&&r.__esModule?r:{default:r};function s(e){return function(){var n=e.apply(this,arguments);return new Promise((function(e,t){return function r(i,a){try{var o=n[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var c={otp:"",ref:"",pending:60,timeStamp:0,countdownTimer:null,redirectCountdownTimer:null,step:1};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="";switch(e){case 1:n="request otp";break;case 2:n="verify otp";break;case 3:n="set new password";break;case 4:n="Success!";break;default:n="request otp"}var t=document.querySelector("#progress"),r=document.querySelectorAll(".circle"),i=document.querySelector("#setting h1");i.innerText=n;var a=e;function o(){r.forEach((function(e,n){n<a?e.classList.add("active"):e.classList.remove("active")}));var e=document.querySelectorAll(".active");t.style.width=(e.length-1)/(r.length-1)*100+"%"}o()}function d(){c.countdownTimer&&clearTimeout(c.countdownTimer);var e=document.querySelector("#countdown");if(e){var n=(new Date).getTime(),t=c.pending,r=Math.floor((n-c.timeStamp)/1e3);if(r>=60?t=0:r<60&&60!==t&&(t=60-r),t>0)c.pending=t-1,e.innerText=c.pending,c.countdownTimer=setTimeout((function(){d(c.pending)}),1e3);else{var i=document.querySelector("#insert_otp_login button");i.removeAttribute("disabled"),e.parentNode.innerHTML="",i.onclick=function(e){e.preventDefault(),c.pending=60,i.setAttribute("disabled",!0),document.querySelector("#insert_otp_login button span").innerHTML='(<span id="countdown">'+c.pending+"</span> sec)",d(c.pending)}}}}function l(){var e=document.querySelector("#phone_otp_input_login"),n=document.querySelector(".digit-group").querySelectorAll("input");n.length&&(n[0].focus(),n.forEach((function(n){var t,r;n.onchange=(t=s(regeneratorRuntime.mark((function n(t){var r,a,s,f,m,h,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.parentNode,a=t.target.value,document.querySelector("#invalid_otp_login").innerText="",!a){n.next=9;break}(s=r.querySelector("input#"+this.dataset.next))&&s.focus(),n.next=27;break;case 9:if(a){n.next=14;break}(f=r.querySelector("input#"+this.dataset.previous))&&f.focus(),n.next=27;break;case 14:if(c.otp="",formTag.querySelectorAll("input").forEach((function(e){c.otp+=e.value})),4!==c.otp.length){n.next=27;break}return e.innerHTML='\n        <div id="otp_loader_login">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',n.next=20,(0,i.generateHeaders)();case 20:return m=n.sent,h=(0,i.userToken)(),g={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+h,"Client-Token":m["Client-Token"],"Time-Stamp":m["Time-Stamp"],"Time-Signature":m["Time-Signature"]},body:JSON.stringify({otp:c.otp,ref:c.ref})},n.next=25,fetch(o.default.loginVerifyOTPEndpoint,g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 25:200===n.sent.resCode?(c.step+=1,u(c.step),p()):(e.innerHTML=v(c.pending),document.querySelector("#invalid_otp_login").innerText="Invalid OTP Code!",l(),d());case 27:case"end":return n.stop()}}),n,this)}))),function(e){return t.apply(this,arguments)}),n.onkeyup=(r=s(regeneratorRuntime.mark((function n(t){var r,a,s,f,m,h,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.parentNode,a=r.parentNode,document.querySelector("#invalid_otp_login").innerText="",8!==t.keyCode&&37!==t.keyCode){n.next=9;break}(s=r.querySelector("input#"+this.dataset.previous))&&s.focus(),n.next=28;break;case 9:if(!(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90||t.keyCode>=96&&t.keyCode<=105||39===t.keyCode)){n.next=28;break}if(!(f=r.querySelector("input#"+this.dataset.next))){n.next=15;break}f.focus(),n.next=28;break;case 15:if(c.otp="",a.querySelectorAll("input").forEach((function(e){c.otp+=e.value})),4!==c.otp.length){n.next=28;break}return e.innerHTML='\n        <div id="otp_loader_login">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',n.next=21,(0,i.generateHeaders)();case 21:return m=n.sent,h=(0,i.userToken)(),g={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+h,"Client-Token":m["Client-Token"],"Time-Stamp":m["Time-Stamp"],"Time-Signature":m["Time-Signature"]},body:JSON.stringify({otp:c.otp,ref:c.ref})},n.next=26,fetch(o.default.loginVerifyOTPEndpoint,g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 26:200===n.sent.resCode?(c.step+=1,u(c.step),p()):(e.innerHTML=v(c.pending),document.querySelector("#invalid_otp_login").innerText="Invalid OTP Code!",l(),d());case 28:case"end":return n.stop()}}),n,this)}))),function(e){return r.apply(this,arguments)})})))}function p(){var e=document.querySelector("#phone_otp_input_login");e.innerHTML='\n        <form action="" autocomplete="off" id="reset_password_form_login">\n            <div class="mb-3">\n                <label for="password" class="form-label">New Password</label>\n                <input type="password" class="form-control" id="password_login" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div class="mb-3">\n                <label for="password_repeat" class="form-label">Confirm password</label>\n                <input type="password" class="form-control" id="password_repeat_login" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div style="display:flex; justify-content: center; align-items: center;">\n                <button type="submit" class="btn btn-warning">Reset Password</button>\n            </div>\n        </form>\n    ';var n,t=document.querySelector("#reset_password_form_login"),r=t.querySelector("button"),a=[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(t.querySelectorAll("input")));a[0].focus(),a.forEach((function(e){e.oninput=function(){a.forEach((function(e){e.classList.remove("is-invalid")}))}})),r.onclick=(n=s(regeneratorRuntime.mark((function n(t){var r,s,d,l,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),(r=a.map((function(e){return e.value?e.value:null})))[0]!==r[1]||!r[0]){n.next=14;break}return n.next=5,(0,i.generateHeaders)();case 5:return s=n.sent,d=(0,i.userToken)(),l={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+d,"Client-Token":s["Client-Token"],"Time-Stamp":s["Time-Stamp"],"Time-Signature":s["Time-Signature"]},body:JSON.stringify({otp:c.otp,ref:c.ref,password:r[0],confirmPassword:r[1]})},n.next=10,fetch(o.default.loginVerifyOTPEndpoint,l).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 10:200===(p=n.sent).resCode?(c.step+=1,u(c.step),console.log(p.message),e.innerHTML=m(3),f(3),setTimeout((function(){c.step=1,window.location.hash="setting"}),3e3)):(console.log(p.message),alert(p.message)),n.next=15;break;case 14:a.forEach((function(e){e.classList.add("is-invalid")}));case 15:case"end":return n.stop()}}),n,this)}))),function(e){return n.apply(this,arguments)})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=document.querySelector("#redirect_countdown");e>0?c.redirectCountdownTimer=setTimeout((function(){n.innerText=e-1,f(e-1)}),1e3):c.redirectCountdownTimer&&clearTimeout(c.redirectCountdownTimer)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10";return'\n        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">\n            <img style="display:block; width: 50%; border-radius: 10px;" src="https://i.pinimg.com/originals/e8/06/52/e80652af2c77e3a73858e16b2ffe5f9a.gif">\n            <div>\n                <h2 style="text-align: center;">Success!</h2>\n            </div>\n            <div>\n                <p style="text-align: center;">Page redirect in <span id="redirect_countdown">'+e+"</span> seconds...</p>\n            </div>\n        </div>\n    "}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return'\n    <form class="digit-group" data-group-name="digits" autocomplete="off" id="insert_otp_login">\n        <div>\n            <h3>Enter OTP Code</h3>\n        </div>\n        <div>\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-1" name="digit-1" data-next="digit-2" maxlength="1" />\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-2" name="digit-2" data-next="digit-3" data-previous="digit-1"\n                maxlength="1" />\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-3" name="digit-3" data-next="digit-4" data-previous="digit-2"\n                maxlength="1" />\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-4" name="digit-4" data-previous="digit-3" maxlength="1" />\n        </div>\n        <div id="invalid_otp_login"></div>\n        <div>\n            <button class="btn btn-warning" type="submit" disabled>Request OTP <span>(<span id="countdown">'+e+"</span> sec)</span></button>\n        </div>\n    </form>\n    "}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.userProfileSetting=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">user profile</div>\n    ',document.querySelector("#setting").innerHTML='\n        <div>\n        \n        </div>\n        <div>\n            \n        </div>\n        <div>\n            <a href="#setting" class="btn btn-primary">Back To Setting</a>\n        </div>\n    '}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.aboutDriverApp=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">user profile</div>\n    ',document.querySelector("#setting").innerHTML='\n        <div>\n        \n        </div>\n        <div>\n            \n        </div>\n        <div>\n            <a href="#setting" class="btn btn-primary">Back To Setting</a>\n        </div>\n    '}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,a=(r=regeneratorRuntime.mark((function e(n){var t,r,i,a,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=document.querySelector("#register_qr"),r=document.querySelector("#preprint_id_register"),i=document.querySelector("#tracking_id_register"),c.id=r.value.trim().toLowerCase(),a=c.id,c.trackingId=i.value.trim().toLowerCase(),s=c.trackingId,t.innerHTML='\n            <div id="loader">\n                <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                </div>\n                <h4>Loading...</h4>\n            </div>\n        ',!/^p{2}\d{13}$/g.test(a)||!/^ex\d{13}$/g.test(s)){e.next=17;break}return e.next=12,(0,o.registerPreprintId)(c.id,c.trackingId);case 12:p=e.sent,console.log(p),200===p.resCode?(t.innerHTML=d(3),l(3),setTimeout((function(){var e=c.trackingId;c.redirectCountdownTimer=null,c.id="",c.trackingId="",window.location.hash="search/trackingid?id="+e}),3e3)):(console.log(p.message),alert(p.message),u()),e.next=18;break;case 17:u();case 18:case"end":return e.stop()}}),e,this)})),i=function(){var e=r.apply(this,arguments);return new Promise((function(n,t){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));n(s)}("next")}))},function(e){return i.apply(this,arguments)});n.qrRegister=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=document.querySelector("header");t.style.display="block",t.innerHTML='\n        <div id="header">Register ID</div>\n    ';var r=document.querySelector(".container");r.innerHTML='\n    <div id="register_qr">\n        <div>\n            <form action="" autocomplete="off">\n                <div class="mb-3">\n                    <label for="preprint_id_register" class="form-label">Prerint QR ID</label>\n                    <input type="text" class="form-control" id="preprint_id_register" autocomplete="off"\n                        placeholder="#PP0123456789012">\n                    <div class="invalid-feedback">Preprint ID starts with "PP"</div>\n                </div>\n                <div class="mb-3">\n                    <label for="tracking_id_register" class="form-label">Parcel Tracking ID</label>\n                    <input type="text" class="form-control" id="tracking_id_register"\n                        placeholder="#EX0123456789012">\n                    <div class="invalid-feedback">Parcel Tracking ID starts with "EX"</div>\n                </div>\n                <button type="submit" class="btn btn-warning">Register Parcel ID</button>\n            </form>\n        </div>\n    </div>\n    ',c.id=(0,s.getParameterByName)("id")||e,c.trackingId=(0,s.getParameterByName)("trackingId")||n;var i=document.querySelector("#preprint_id_register"),o=document.querySelector("#tracking_id_register");i.addEventListener("input",p),o.addEventListener("input",p),c.id&&(i.value=c.id);c.trackingId&&(o.value=c.trackingId);var u=document.querySelector("#register_qr"),d=u.querySelector("form");d.onsubmit=a};var o=t(6),s=t(2);var c={redirectCountdownTimer:null,id:"",trackingId:""};function u(){document.querySelector("#register_qr").innerHTML='\n            <div>\n                <form action="" autocomplete="off">\n                    <div class="mb-3">\n                        <label for="preprint_id_register" class="form-label">Prerint QR ID</label>\n                        <input type="text" class="form-control" id="preprint_id_register" autocomplete="off"\n                            placeholder="#PP0123456789012">\n                        <div class="invalid-feedback">Preprint ID starts with "PP"</div>\n                    </div>\n                    <div class="mb-3">\n                        <label for="tracking_id_register" class="form-label">Parcel Tracking ID</label>\n                        <input type="text" class="form-control" id="tracking_id_register"\n                            placeholder="#EX0123456789012">\n                        <div class="invalid-feedback">Parcel Tracking ID starts with "EX"</div>\n                    </div>\n                    <button type="submit" class="btn btn-warning">Register Parcel ID</button>\n                </form>\n            </div>\n            ';var e=document.querySelector("#preprint_id_register"),n=document.querySelector("#tracking_id_register");e.classList.add("is-invalid"),n.classList.add("is-invalid"),e.addEventListener("input",p),n.addEventListener("input",p),document.querySelector("#register_qr form").onsubmit=a}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10";return'\n            <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">\n                <img style="display:block; width: 50%; border-radius: 10px;" src="https://i.pinimg.com/originals/e8/06/52/e80652af2c77e3a73858e16b2ffe5f9a.gif">\n                <div>\n                    <h2 style="text-align: center;">Success!</h2>\n                </div>\n                <div>\n                    <p style="text-align: center;">Page redirect in <span id="redirect_countdown">'+e+"</span> seconds...</p>\n                </div>\n            </div>\n        "}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=document.querySelector("#redirect_countdown");e>0?c.redirectCountdownTimer=setTimeout((function(){n.innerText=e-1,l(e-1)}),1e3):c.redirectCountdownTimer&&clearTimeout(c.redirectCountdownTimer)}function p(){this.id.includes("tracking_id")?c.id=this.value:this.id.includes("preprint_id")&&(c.trackingId=this.value);var e=document.querySelectorAll("input");[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(e)).forEach((function(e){e.classList.remove("is-invalid")}))}}]);