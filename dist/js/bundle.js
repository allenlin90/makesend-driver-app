!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginProcess=t.checkToken=t.generateHeaders=void 0;var r,i,a;t.generateHeaders=(r=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(d,{method:"post",mod:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)}),t.checkToken=(i=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!(n=v())){e.next=7;break}return e.next=5,fetch(""+p,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json",credentials:"makesend_sorting"},body:JSON.stringify({id:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 5:200===e.sent.resCode&&(t=!0);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),t.loginProcess=(a=u(regeneratorRuntime.mark((function e(t,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({phone:t,birthDate:n+"-"+r+"-"+i})}).then((function(e){return e.json()})).catch((function(e){return e}));case 2:if(200!==(a=e.sent).resCode){e.next=7;break}return o?localStorage.setItem("token",a.id):sessionStorage.setItem("token",a.id),window.location.hash="dashboard",e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return a.apply(this,arguments)});t.userToken=v;var o,s=n(1),c=(o=s)&&o.__esModule?o:{default:o};function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var d=c.default.host+"/header",l=c.default.driverLogin,p=c.default.driverList;function v(){return sessionStorage.getItem("token")||localStorage.getItem("token")||null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="https://makesend-driver.herokuapp.com",i="https://apiold.makesend.asia",a={host:r,apiEndpoint:i,appEndpoint:"https://app.makesend.asia",driverList:r+"/drivers",driverLogin:r+"/driverlogin",searchParcelByPhone:r+"/searchParcelByPhone",searchParcelById:r+"/searchParcelByTrackingId",driverTasks:r+"/sorting",allParcels:i+"/api/google/makesend/order/fetch",checkToken:i+"/api/msd/authPing",uploadEndpoint:i+"/api/msd/delivery/uploadPOD",requestOTPEndpoint:i+"/api/msd/password/recover/requestOTP",verifyOTPEndpoint:i+"/api/msd/password/recover/verifyOTP",changePasswordEndpoint:i+"/api/msd/password/recover",loginRequestOTPEndpoint:i+"/api/msd/user/password/change/requestOTP",loginVerifyOTPEndpoint:i+"/api/msd/user/password/change/verifyOTP",loginChangePasswordEndpoint:i+"/api/msd/user/password/change",createPreprintIdEndpoint:i+"/api/msd/qr/preprint/generate",checkPreprintIdEndpoint:i+"/api/msd/qr/preprint/check",registerPreprintIdEndpoint:i+"/api/msd/qr/preprint/register"};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParameterByName=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkDeliveryStatus=t.searchParcelById=t.searchParcelByPhone=t.state=void 0;var r,i,a,o=t.searchParcelByPhone=(r=f(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.match(/^0\d{9}/g)){e.next=19;break}return e.prev=2,e.next=5,(0,v.generateHeaders)();case 5:return n=e.sent,e.next=8,fetch(m,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"],credentials:"makesend_sorting"},body:JSON.stringify({receiver_phone:t})}).then((function(e){return e.json()})).then((function(e){return e}));case 8:r=e.sent,g.allParcelStatus=r.reduce((function(e,t){return e[t.shipmentID]={id:t.shipmentID,status:t.status.toLowerCase()},e}),{}),g.parcels=r.map((function(e){var t=new Date(Date.parse(e.service_date)).toLocaleDateString().split("/");return e.service_date=t[2]+"-"+t[0]+"-"+t[1],e})),g.parcels.length?S():k(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),w(e.t0);case 17:e.next=21;break;case 19:b("Phone number starts with 0 and is in 10 digits!");case 21:case"end":return e.stop()}}),e,this,[[2,14]])}))),function(e){return r.apply(this,arguments)}),s=t.searchParcelById=(i=f(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=/^([eE][xX]|[Ss][Tt])\d{13}/g.exec(t))){e.next=23;break}return e.prev=2,e.next=5,(0,v.generateHeaders)();case 5:return r=e.sent,e.next=8,fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"],credentials:"makesend_sorting"},body:JSON.stringify({trackingId:n[0]})}).then((function(e){return e.json()})).then((function(e){return e}));case 8:if(i=e.sent,g.parcels=i,!g.parcels.length){e.next=15;break}return S(),e.abrupt("return",i);case 15:k();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),w(e.t0);case 21:e.next=25;break;case 23:b("Your tracking ID is invalid!");case 25:case"end":return e.stop()}}),e,this,[[2,18]])}))),function(e){return i.apply(this,arguments)});t.checkDeliveryStatus=(a=f(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return e.next=3,(0,v.generateHeaders)();case 3:return t=e.sent,e.next=6,fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"],credentials:"makesend_sorting"},body:JSON.stringify({trackingId:r})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:if(!(n=e.sent).length){e.next=9;break}return e.abrupt("return",n[0].status.toLowerCase());case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)});t.handleSubmitEvent=function(){document.querySelector("form").onsubmit=function(e){e.preventDefault(),y()}},t.handleInputEvent=function(){document.querySelector("input").oninput=function(e){g.input=e.target.value,document.querySelector("#result_list ul").innerHTML="",g.timeoutId&&clearTimeout(g.timeoutId);var t=setTimeout((function(){y()}),300);g.timeoutId=t}};var c,u=n(6),d=n(7),l=n(1),p=(c=l)&&c.__esModule?c:{default:c},v=n(0);function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var m=""+p.default.searchParcelByPhone,h=""+p.default.searchParcelById,g=t.state={input:"",timeoutId:null,parcels:[],allParcelStatus:null};function y(){var e=document.querySelector("input");"receiver_phone"===e.id?o(g.input):"tracking_id"===e.id&&s(g.input)}function b(e){document.querySelector("#result_list ul").innerHTML='\n    <li id="input_error" class="list-group-item" style="color: red; font-weight: bold;"></li>\n    ',document.querySelector("#input_error").innerText=e}function k(){document.querySelector("#result_list ul").innerHTML='\n    <li id="input_error" class="list-group-item" style="color: red; font-weight: bold;"></li>\n    ',document.querySelector("#input_error").innerText='No result from "'+g.input+'"'}function S(){var e=g.parcels.map((function(e){if(/^[eE][xX]\d{13}/g.exec(e.shipmentID)){var t=new Date(Date.parse(e.service_date));return'\n            <li class="list-group-item">\n                <div class="card" data-shipment-id="'+e.shipmentID+'">\n                    <div class="card-body">\n                        <h5 class="card-title">Parcel ID: '+e.shipmentID+'</h5>\n                        <h6 class="card-subtitle mb-2 text-muted">Service Date: '+t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()+'</h6>\n                        <h6 class="card-subtitle mb-2 text-muted">Delivery Status: '+e.status+'</h6>\n                        <p class="card-text">Client:'+e.receiver_name+'</p>\n                        <p class="card-text">Phone:'+e.receiver_no+'</p>\n                        <p class="card-text">Address: '+e.dropoff_address+'</p>\n                        <p class="card-text">'+e.dropoff_district+", "+e.dropoff_province+", "+e.dropoff_postcode+'</p>\n                        <p class="card-text">Note: '+e.note+"</p>\n                        <div>\n                            "+T(e.status.trim().toLowerCase(),e.shipmentID)+"\n                        </div>\n                    </div>\n                </div>\n            </li>\n            "}if(/^[Ss][Tt]\d{13}/g.exec(e.shipmentID)){console.log(e);var n=new Date(Date.parse(e.created_at)),r=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear();return'\n            <li class="list-group-item">\n                <div class="card" data-shipment-id="'+e.shipmentID+'">\n                    <div class="card-body">\n                        <h5 class="card-title">Parcel ID: '+e.shipmentID+'</h5>\n                        <h6 class="card-subtitle mb-2 text-muted">Delivery Status: '+e.status+'</h6>\n                        <p class="card-text">Created at: '+r+"</p>\n                        <div>\n                            "+T(e.status.trim().toLowerCase(),e.shipmentID)+"\n                        </div>\n                    </div>\n                </div>\n            </li>\n            "}})).join("");document.querySelector("#result_list ul").innerHTML=e,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(document.querySelector(".list-group.list-group-flush").children)).forEach((function(e){var t=e.querySelector(".card");e.querySelector("div[data-type=signature]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),(0,u.createSignaturePad)(t.dataset.shipmentId)})),e.querySelector("div[data-type=photo]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),(0,d.createImageUploader)(t.dataset.shipmentId)}))}))}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t){var n="",r="";switch(e){case"pending":case"in hub":case"delivering":case"delivering (delay)":case"returning":case"re-deilvering":n="primary";break;case"delivered":case"delivered (delay)":case"returned":n="primary",r="disabled";break;case"canceled":case"failed delivery":case"not found":n="danger",r="disabled";break;default:n="primary"}return'\n        <div class="card-link btn btn-'+n+" "+r+'" data-type="photo">Photo</div>\n        <div class="card-link btn btn-'+n+" "+r+'" data-type="signature">Singature</div>\n        \x3c!-- <div class="card-link btn btn-'+n+" "+r+'">\n            <a href="#scanner?id='+t+'">\n                Scan_QR\n            </a>\n        </div>\n        <div class="card-link btn btn-'+n+" "+r+' disabled">\n            <a class="disabled" href="#registerqr?trackingId='+t+'">\n                Pair_ID\n            </a>\n        </div> --\x3e\n        '}return null}function w(e){var t=document.querySelector("header"),n=t.innerHTML;t.innerHTML='\n    <div id="warning" class="alert alert-danger" role="alert">\n        Something went wrong: '+e+"\n    </div>\n    ",setTimeout((function(){t.innerHTML=""+n}),3e3)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qrScanner=void 0;var r;t.qrScanner=(r=a(regeneratorRuntime.mark((function e(){var t,n,r,s,c,u,d,l,p,v,f,m,h,g,y,b,k,S=(t=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(p.style.display="block",m.style.display="block",o.scanning&&(o.video.srcObject.getTracks().forEach((function(e){e.stop()})),o.stream.getTracks().forEach((function(e){e.stop()}))),o.scanning=!1,d.hidden=!0,T(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),T=(n=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.toString().trim().toLowerCase(),(0,i.actionsToQR)(n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),w=(r=a(regeneratorRuntime.mark((function e(){var t,n,r,i,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.style.display="none",m.style.display="none",f.style.display="none",d.hidden=!1,!/iphone|ipad|mac|apple|os\sx/.test(k().toLowerCase())){e.next=24;break}return t=function(){var e=a(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0}).then(function(){var e=a(regeneratorRuntime.mark((function e(n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:if(!(r=e.sent).length){e.next=12;break}return i=r.filter((function(e){return"videoinput"===e.kind})),a=v.value,v.innerHTML="",i.forEach((function(e,t){console.log(e);var n=document.createElement("option");n.value=e.deviceId,n.text=e.label||"camera "+(t+1),v.appendChild(n)})),v.value=a,e.abrupt("return",r);case 12:g(),console.log("trigger");case 14:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}()).catch(g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.prev=6,o.stream&&o.stream.getTracks().forEach((function(e){e.stop()})),e.next=10,t();case 10:n=e.sent,r=n.filter((function(e){return"videoinput"===e.kind&&/(back|rear)/g.test(e.label.toLowerCase())})),i={},s=v.value,i=r.length?{video:{deviceId:s?{exact:s}:r[r.length-1].deviceId}}:{video:{deviceId:{exact:void 0}}},console.log(i),navigator.mediaDevices.getUserMedia(i).then(h).then(x).catch(g),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),g(e.t0);case 22:e.next=25;break;case 24:try{if(o.stream&&o.stream.getTracks().forEach((function(e){e.stop()})),c=v.value,u=null,o.rearCameras.length)u={video:{deviceId:c?{exact:c}:{exact:o.rearCameras[o.rearCameras.length-1].deviceId}}},navigator.mediaDevices.getUserMedia(u).then(h).then(x).catch(g);else{u={video:{deviceId:void 0}};try{u={video:{facingMode:"environment"}},navigator.mediaDevices.getUserMedia(u).then(h).then(x).catch(g)}catch(e){console.log("no rear camera"),u={video:!0},navigator.mediaDevices.getUserMedia(u).then(h).then(x).catch(g)}}console.log(u)}catch(e){console.log(e)}case 25:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(){return r.apply(this,arguments)}),x=(s=a(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices().then((function(e){return e})).catch((function(e){return e}));case 2:if(t=e.sent,!(n=t.filter((function(e){return"videoinput"===e.kind}))).length){e.next=14;break}return r=v.value,v.innerHTML="",n.forEach((function(e,t){var n=document.createElement("option");n.value=e.deviceId,n.text=e.label||"camera "+(t+1),v.appendChild(n)})),v.value=r,i=t.filter((function(e){return/(back|rear)/g.test(e.label.toLowerCase())})),o.rearCameras=i,e.abrupt("return",t);case 14:g("This device has no available camera");case 15:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)});return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k=function(){var e=navigator.userAgent.match(/\((.*?)\)/g)[0];return e=e.slice(1,e.length-1)},b=function e(){try{qrcode.decode()}catch(t){setTimeout(e,300)}},y=function e(){o.scanning&&(d.height=o.video.videoHeight,d.width=o.video.videoWidth,l.drawImage(o.video,0,0,d.width,d.height),o.scanning&&requestAnimationFrame(e))},g=function(e){var t="<h1>App can't start camera because </h1>\n            <p>\""+e+'"</p>\n            <div id="refresh_page" class="btn btn-light" style="margin: 0 auto;">Reload Page</div>';document.querySelector("#qrcode_scanner").innerHTML=t,document.querySelector("#refresh_page").addEventListener("click",(function(e){e.stopPropagation(),location.reload()})),console.log(e)},h=function(e){o.stream=e,o.scanning=!0,o.video.setAttribute("playsinline",!0),o.video.srcObject=e,o.video.play(),y(),b()},(c=document.querySelector("header")).style.display="block",c.innerHTML='\n        <div id="header">QR Reader</div>\n    ',(u=document.querySelector(".container")).style.justifyContent="space-between",u.innerHTML='\n        <div id="qrcode_scanner">\n            <div id="videoSelect">\n                <label for="videoSource">Change Camera</label>\n                <select id="videoSource" class="custom-select"></select>\n            </div>\n            <canvas id="qr-canvas" hidden></canvas>\n            <div id="qr-result">\n                <b>Result: </b>\n                <p id="output_data">https://app.makesend.asia/tracking?t=PP2103151042875</p>\n                <p id="parcel_status">Status: <span>pending</span></p>\n            </div>\n            <div id="actionToResult">\n                <a href="#" class="btn btn-primary">action</a>\n                <hr>\n            </div>\n            <div id="startScanBtn">\n                <label>\n                    <img src="https://uploads.sitepoint.com/wp-content/uploads/2017/07/1499401426qr_icon.svg">\n                    <p>Scan Again</p>\n                </label>\n            </div>\n        </div>\n    ',o.video=document.createElement("video"),(d=document.querySelector("#qr-canvas")).width=d.offsetHeight/3*4,l=d.getContext("2d"),p=document.querySelector("#qr-result"),v=document.querySelector("#videoSource"),f=document.querySelector("#actionToResult"),m=document.querySelector("#startScanBtn"),v.onchange=w,e.next=22,x();case 22:return e.next=24,w();case 24:qrcode.callback=S,m.onclick=w;case 27:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)});t.stopStream=function(){if(o.scanning){o.video&&o.video.srcObject.getTracks().forEach((function(e){e.stop()})),o.stream&&o.stream.getTracks().forEach((function(e){e.stop()})),o.scanning=!1,o.video=null,o.stream=null,document.querySelector("#qr-canvas").hidden=!0}};var i=n(5);function a(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var o={rearCameras:[],cameras:[],appleDevice:null,scanning:!1,video:null,stream:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preprintIdCreator=t.registerPreprintId=t.checkPreprintId=t.checkParcelStatus=t.actionsToQR=void 0;t.actionsToQR=(r=g(regeneratorRuntime.mark((function e(){var t,n,r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=/.?(([Ee][Xx]|[Ss][Tt]|[Pp]{2})\d{13}).?/g.exec(a),n=document.querySelector("#output_data"),(r=document.querySelector("#parcel_status")).innerHTML="",!t){e.next=11;break}return i=t[1].toUpperCase(),a.includes("http")?n.innerHTML="\n            Parcel ID: <a href="+a+">"+i+"</a>\n            ":n.innerText=i,e.next=9,d(i,r);case 9:e.next=12;break;case 11:a.includes("http")||a.includes("www")?n.innerHTML="\n           <a href="+a+">"+a+"</a>\n        ":n.innerText=a;case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)});var r,i,a,o,s,c,u,d=(i=g(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=32;break}if(t=document.querySelector("#output_data"),n=(0,h.getParameterByName)("id"),(r=document.querySelector("#actionToResult")).style.display="block",i=r.querySelector("a"),!s.includes("ST")){e.next=11;break}i.setAttribute("href","#search?id="+s),i.innerText="Update Delivery Status",e.next=32;break;case 11:if(!s.includes("PP")){e.next=26;break}return e.next=14,p(s);case 14:if(200!==(a=e.sent).resCode||!a.registered){e.next=23;break}return e.next=18,l(a.trackingID);case 18:y(e.sent.status.toLowerCase(),a.trackingID,c,i),e.next=24;break;case 23:200===a.resCode?(o=n?"&trackingId="+n:"",i.setAttribute("href","#registerqr?id="+s+o),i.innerText="Register Parcel",o&&o.includes("EX")&&(window.location.hash="#registerqr?id="+s+o)):(console.log(a.message),alert(a.message),t.innerText="Invalid Tracking ID "+s,r.style.display="none");case 24:e.next=32;break;case 26:if(!s.includes("EX")){e.next=32;break}return e.next=29,l(s);case 29:y(e.sent.status.toLowerCase(),s,c,i);case 32:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),l=t.checkParcelStatus=(a=g(regeneratorRuntime.mark((function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=/.?(([Ee][Xx]|[Ss][Tt]|[Pp]{2})\d{13}).?/g.exec(i)[1].toUpperCase())){e.next=9;break}return e.next=4,(0,m.generateHeaders)();case 4:return n=e.sent,e.next=7,fetch(f.default.searchParcelById,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"]},body:JSON.stringify({trackingId:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 7:return r=e.sent,e.abrupt("return",{trackingId:r[0].shipmentID,status:r[0].status});case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),p=t.checkPreprintId=(o=g(regeneratorRuntime.mark((function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=10;break}return t=localStorage.getItem("token"),e.next=4,(0,m.generateHeaders)();case 4:return n=e.sent,e.next=7,fetch(f.default.checkPreprintIdEndpoint,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","User-Token":""+t,"Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"]},body:JSON.stringify({qr:i})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 7:return r=e.sent,console.log(r),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),v=(t.registerPreprintId=(s=g(regeneratorRuntime.mark((function e(){var t,n,r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,(0,m.generateHeaders)();case 3:return n=e.sent,e.next=6,p(a);case 6:if(200!==(r=e.sent).resCode||r.registered){e.next=13;break}return e.next=10,fetch(f.default.registerPreprintIdEndpoint,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","User-Token":""+t,"Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"]},body:JSON.stringify({qr:a,trackingID:o})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 10:return i=e.sent,console.log(i),e.abrupt("return",i);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),t.preprintIdCreator=(c=g(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,(0,m.generateHeaders)();case 3:return n=e.sent,e.next=6,fetch(f.default.createPreprintIdEndpoint,{method:"post",mod:"cors",responseType:"json",headers:{"Content-Type":"application/json","Client-Token":n["Client-Token"],"Time-Stamp":n["Time-Stamp"],"Time-Signature":n["Time-Signature"],"User-Token":""+t}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),n(1)),f=(u=v)&&u.__esModule?u:{default:u},m=n(0),h=n(2);function g(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!(e&&t&&r&&n))return null;n.innerText="Status: "+e,"pending"===e?(r.setAttribute("href","#search/trackingid?id="+t),r.innerText="Update Delivery Status"):"delivered"===e?(r.setAttribute("href",f.default.appEndpoint+"/tracking?t="+t),r.innerText="Check Parcel POD"):(r.setAttribute("href","#search/trackingid?id="+t),r.innerText="Search Parcel")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSignaturePad=function(e){var t=document.querySelector("footer");t.remove();var n=document.querySelector(".container"),r=document.createElement("div");r.className="modal-dialog modal-dialog-scrollable update-pod",r.innerHTML='\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalScrollableTitle">Tracking ID: '+e+'</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div id="signature_upload" class="signature-pad">\n                <div class="signature-pad--body">\n                    <canvas id="signature_canvas">This browser doesn\'t support canvas</canvas>\n                </div>\n                <div class="signature-pad--footer">\n                    <div class="description">Sign above</div>\n                    <div class="signature-pad--actions">\n                        <div>\n                            <button type="button" class="button clear" data-action="clear">Clear</button>\n                            <button type="button" class="button" data-action="undo">Undo</button>\n                        </div>\n                        <div>\n                            <button type="button" class="button save" data-action="save-png">Save\n                                as\n                                PNG</button>\n                            <button type="button" class="button save" data-action="save-jpg">Save\n                                as\n                                JPG</button>                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            <button type="button" class="btn btn-primary" data-action="upload-signature">Upload</button>\n        </div>\n    </div>\n    ';n.appendChild(r);var o=r.querySelector("[data-action=clear]"),s=r.querySelector("[data-action=undo]"),d=r.querySelector("[data-action=save-png]"),l=r.querySelector("[data-action=save-jpg]"),p=r.querySelector("#signature_canvas"),v=new SignaturePad(p,{backgroundColor:"rgb(255, 255, 255)"});function f(){p.width=p.offsetWidth,p.height=p.offsetHeight,p.getContext("2d"),v.clear()}function m(e,t){var n=function(e){for(var t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),i=r.length,a=new Uint8Array(i),o=0;o<i;++o)a[o]=r.charCodeAt(o);return new Blob([a],{type:n})}(e),r=window.URL.createObjectURL(n),i=document.createElement("a");i.style="display: none",i.href=r,i.download=t,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r)}function h(){r.remove(),n.insertAdjacentElement("afterend",t)}window.addEventListener("resize",f),f(),o.addEventListener("click",(function(e){v.clear()})),s.addEventListener("click",(function(e){var t=v.toData();t&&(t.pop(),v.fromData(t))})),d.addEventListener("click",(function(e){v.isEmpty()?alert("Please provide a signature first."):m(v.toDataURL(),"signature.png")})),l.addEventListener("click",(function(e){v.isEmpty()?alert("Please provide a signature first."):m(v.toDataURL("image/jpeg"),"signature.jpg")})),n.querySelector("[data-action=upload-signature]").onclick=(g=regeneratorRuntime.mark((function t(n){var r,o,s,d,l,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.toDataURL("image/jpeg"),!(o=(0,i.userToken)())){t.next=25;break}return t.next=5,(0,i.generateHeaders)();case 5:return s=t.sent,t.next=8,fetch(u,{method:"post",headers:{"Content-Type":"application/json","User-Token":""+o,"Client-Token":s["Client-Token"],"Time-Stamp":s["Time-Stamp"],"Time-Signature":s["Time-Signature"]},body:JSON.stringify({trackingID:e,type:"signature",PODImage:[r],fileName:"signatuer_"+e})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return alert(e)}));case 8:if(200!==(d=t.sent).resCode||!d.result.length){t.next=20;break}return l="upload signature for "+e+" success!",t.next=13,(0,c.checkDeliveryStatus)(e);case 13:p=t.sent,console.log(c.state),c.state[e]!==p&&(/^\d{10}$/g.test(c.state.input)?(0,c.searchParcelByPhone)(c.state.input):/^[eE][xX]\d{13}$/g.test(c.state.input)&&(0,c.searchParcelById)(c.state.input)),alert(l),h(),t.next=23;break;case 20:f="Error! Upload signature for "+e+" failed!",console.log(f),alert(f);case 23:t.next=27;break;case 25:alert("token is invalid!"),(0,a.userLogin)();case 27:case"end":return t.stop()}}),t,this)})),y=function(){var e=g.apply(this,arguments);return new Promise((function(t,n){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return y.apply(this,arguments)}),n.querySelector(".modal-header button").onclick=h,n.querySelector(".modal-footer button").onclick=h;var g,y};var r,i=n(0),a=n(14),o=n(1),s=(r=o)&&r.__esModule?r:{default:r},c=n(3);var u=s.default.uploadEndpoint},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImageUploader=function(e){var t=(r=c(regeneratorRuntime.mark((function t(){var n,r,a,o,c,d,l,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=arguments[1];return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,i.userToken)(),t.next=3,(0,i.generateHeaders)();case 3:if(r=t.sent,!n){t.next=27;break}return t.next=7,fetch(u,{method:"post",headers:{"Content-Type":"application/json","User-Token":""+n,"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"]},body:JSON.stringify({trackingID:e,type:"image",PODImage:v,fileName:"pod_"+e+"_"+(new Date).toISOString()})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return alert(e)}));case 7:if(200!==(a=t.sent).resCode||!a.result.length){t.next=22;break}return o=a.result.length>1?"images":"image",c="upload "+a.result.length+" "+o+" for "+e+" success!",t.next=13,(0,s.checkDeliveryStatus)(e);case 13:d=t.sent,console.log(s.state),s.state[e]!==d&&(/^\d{10}$/g.test(s.state.input)?(0,s.searchParcelByPhone)(s.state.input):/^[eE][xX]\d{13}$/g.test(s.state.input)&&(0,s.searchParcelById)(s.state.input)),console.log(c),alert(c),f.clearPreviewPanel(),p(),t.next=25;break;case 22:l="upload image for "+e+" failed",console.log(l),alert(l);case 25:t.next=29;break;case 27:alert("token is invalid!"),userLogin();case 29:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),n=document.querySelector("footer");var r;n.remove();var a=document.querySelector(".container"),o=document.createElement("div");o.className="modal-dialog modal-dialog-scrollable update-pod",o.innerHTML='\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalScrollableTitle">Tracking ID: '+e+'</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n        </div>\n        <div class="modal-body">\n            <div id="photo_upload">\n                <div class="custom-file-container" data-upload-id="imageUploader">\n                    <div class="image-upload-btns">\n                        <label class="custom-file-container__custom-file card shadow bg-white roundedcard shadow bg-white rounded">\n                            <div id="photo_btn">\n                                <img src="https://img.icons8.com/plasticine/camera.png" alt="photo_button">\n                                <p>Take a photo</p>\n                            </div>\n                            <input type="file" class="custom-file-container__custom-file__custom-file-input"\n                                accept="image/jpeg, image/png, image/gif" multiple aria-label="Choose File" style="display:none" />\n                            <input type="hidden" name="MAX_FILE_SIZE" value="10485760" style="display:none" />\n                            <span class="custom-file-container__custom-file__custom-file-control" style="display:none"></span>\n                        </label>\n                        \n                    </div>\n                    <div class="custom-file-container__image-preview"></div>\n                    <label><span>Remove All Photos</span>\n                            <a href="javascript:void(0)" class="custom-file-container__image-clear"\n                                title="Clear Image">&times;</a>\n                        </label>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            <button type="button" class="btn btn-primary" data-action="upload-image">Upload</button>\n        </div>\n    </div>\n    ',a.appendChild(o);var l=new FileUploadWithPreview("imageUploader");function p(){o.remove(),a.insertAdjacentElement("afterend",n)}a.querySelector("[data-action=upload-image]").onclick=(v=c(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=l.cachedFileArray).length&&r.forEach((function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n=document.createElement("img");n.src=e.target.result,n.onload=function(e){var n=document.createElement("canvas"),i=400/e.target.width;n.width=400,n.height=e.target.height*i;var a=n.getContext("2d");a.drawImage(e.target,0,0,n.width,n.height);var o=a.canvas.toDataURL(e.target,"image/jpeg",.92);d.compressedFiles.push(o),d.compressedFiles.length===r.length&&t(d.compressedFiles,l)}}}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)}),a.querySelector(".modal-header button").onclick=p,a.querySelector(".modal-footer button").onclick=p;var v};var r,i=n(0),a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(3);function c(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var u=o.default.uploadEndpoint,d={files:[],compressedFiles:[]}},function(e,t,n){"use strict";var r=n(9),i=n(10),a=n(11),o=n(0),s=n(12),c=n(13),u=n(15),d=n(4),l=n(16),p=n(18),v=n(19),f=n(20),m=n(21);function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}window.onload=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token")||sessionStorage.getItem("token"))){e.next=8;break}return e.next=4,(0,o.checkToken)(t);case 4:e.sent?(window.location.hash="tasks",(0,a.showheaders)(),(0,i.navigators)("tasks"),(0,u.taskList)()):(0,r.login)(),e.next=9;break;case 8:(0,r.login)();case 9:window.onhashchange=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.hash.toLowerCase(),console.log("path changes! "+t),e.next=4,(0,o.checkToken)();case 4:if(n=e.sent,(0,d.stopStream)(),(0,a.hideHeaders)(),(0,p.resetPasswordState)(),!n){e.next=12;break}t.includes("#dashboard")?window.location.hash="tasks":t.includes("#scanner")?((0,i.navigators)("scanner"),(0,d.qrScanner)()):t.includes("#search")?((0,i.navigators)("search"),(0,c.searchFeatures)()):t.includes("#tasks")?((0,i.navigators)("tasks"),(0,u.taskList)()):t.includes("#setting")?t.includes("userprofile")?(0,v.userProfileSetting)():t.includes("resetpassword")?(0,p.resetPassword)():t.includes("about")?(0,f.aboutDriverApp)():((0,i.navigators)("setting"),(0,l.userSetting)()):t.includes("#registerqr")?(0,m.qrRegister)():window.location.hash="",e.next=18;break;case 12:e.t0=window.location.hash,e.next="#forgetpassword"===e.t0?15:17;break;case 15:return(0,s.forgetPassword)(),e.abrupt("break",18);case 17:(0,r.login)();case 18:case"end":return e.stop()}}),e,this)})));case 10:case"end":return e.stop()}}),e,this)})))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.login=function(){sessionStorage.clear(),localStorage.clear(),window.location.hash="";var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=new Date,n=Array.from({length:e},(function(e,t){return t})).reduce((function(e,n,r){var i=t.getFullYear()-r;return e+='<option value="'+i+'">'+(i+543)+"</option>"}),"");return n='<option value="" selected="true" disabled>Select A Year</option>'+n}(100),t=(n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=Array.from({length:12},(function(e,t){return t+1})).reduce((function(e,t,r){return e+='<option value="'+(t<10?"0"+t:""+t)+'">'+n[r]+"</option>"}),""),a='<option value="" selected="true" disabled>Select A Month</option>'+a);var n,a;i.innerHTML='\n        <div id="login_form">\n            <div id="makesend_logo">\n                <img src="https://www.makesend.asia/wp-content/uploads/2018/06/logo-makesend.png" alt="ms_logo">\n            </div>\n            <form action="" autocomplete="off">\n                <div class="mb-3">\n                    <label for="phone" class="form-label">Phone</label>\n                    <input class="form-control" id="phone" type="tel" name="receiver_phone" value="" inputmode="numeric" placeholder="#0632166699" autocomplete="off" required">\n                    <div class="invalid-feedback">Your phone is not correct</div>\n                    </div>\n                <div class="mb-3" style="display: flex; justify-content: space-between">\n                    <select id="year_selector" required style="text-align-last: center">\n                        '+e+'\n                    </select>\n                    <select id="month_selector" required style="text-align-last: center">\n                        '+t+'\n                    </select>\n                    <select id="date_selector" required style="text-align-last: center">\n                        <option disabled selected="true" value="">Select a Date<option>\n                    </select>\n                </div>\n                <div id="birthday_error" class="invalid-feedback">Your birthday is not correct</div>\n                <div class="mb-3 form-check">\n                    <input type="checkbox" class="form-check-input" id="remember_me" checked>\n                    <label class="form-check-label" for="remember_me">Remember me</label>\n                </div>\n                <button type="submit" class="btn btn-warning">Login</button>\n            </form>\n        </div>\n    ';var o=document.querySelector("#login_form"),s=document.querySelector("#phone"),c=document.querySelector("#remember_me"),u=document.querySelector("#year_selector"),d=document.querySelector("#month_selector"),l=document.querySelector("#date_selector"),p=document.querySelector("#birthday_error");function v(){s.classList.remove("is-invalid"),p.classList.remove("d-block")}d.addEventListener("change",(function(e){!function(e,t){var n=0;switch(parseInt(e.target.value)){case 1:case 3:case 5:case 7:case 8:case 10:case 12:n=31;break;case 4:case 6:case 9:case 11:n=30;break;case 2:n=29}var r=Array.from({length:n},(function(e,t){return t+1})).reduce((function(e,t,n){return e+='<option value="'+(t<10?"0"+t:""+t)+'">'+t+"</option>"}),"");r='<option disabled selected="true" value="">Select A Date</option>'+r,t.innerHTML=r}(e,l)})),s.addEventListener("input",v),u.addEventListener("change",v),d.addEventListener("change",v),l.addEventListener("change",v),o.addEventListener("submit",(f=regeneratorRuntime.mark((function e(t){var n,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=s.value,i=u.value,a=d.value,o=l.value,n&&i&&a&&o){e.next=10;break}s.classList.add("is-invalid"),p.classList.add("d-block"),e.next=18;break;case 10:if(!(n&&i&&a&&o)){e.next=16;break}return e.next=13,(0,r.loginProcess)(n,i,a,o,c.checked);case 13:if(!e.sent){e.next=16;break}return e.abrupt("return");case 16:s.classList.add("is-invalid"),p.classList.add("d-block");case 18:case"end":return e.stop()}}),e,this)})),m=function(){var e=f.apply(this,arguments);return new Promise((function(t,n){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return m.apply(this,arguments)}));var f,m};var r=n(0);var i=document.querySelector(".container")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navigators=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dashboard",t=document.querySelector(".container"),n=document.querySelector("footer");t.innerHTML="",n.innerHTML='\n        <div class="navigator">\n            <div>\n                <a href="#scanner" class="" id="navi_scanner">\n                    <i class="fas fa-qrcode"></i>\n                    <span>Scan</span>\n                </a>\n            </div>\n            <div>\n                <a href="#search" class="" id="navi_search">\n                    <i class="fas fa-search"></i>\n                    <span>Search</span>\n                </a>\n            </div>\n            <div>\n                <a href="#tasks" class="" id="navi_tasks">\n                    <i class="fas fa-tasks"></i>\n                    <span>Tasks</span>\n                </a>\n            </div>\n            <div>\n                <a href="#setting" class="" id="navi_setting">\n                    <i class="fas fa-cog"></i>\n                    <span>Setting</span>\n                </a>\n            </div>\n        </div>\n    ',r(e)};n(4);function r(e){var t=document.querySelector("#navi_scanner"),n=document.querySelector("#navi_search"),r=document.querySelector("#navi_tasks"),i=document.querySelector("#navi_setting");switch([r,n,t,i].forEach((function(e){e.classList.remove("selected")})),e){case"dashboard":n.classList.add("selected");break;case"scanner":t.classList.add("selected");break;case"tasks":r.classList.add("selected");break;case"setting":i.classList.add("selected");break;default:n.classList.add("selected")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showheaders=function(){document.querySelector("header").style.display="block"},t.hideHeaders=function(){document.querySelector("header").style.display="none"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,a,o,s=(r=m(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(t=e.sent,!a){e.next=8;break}return e.next=6,fetch(v.default.changePasswordEndpoint,{method:"post",mod:"cors",headers:{"Content-Type":"application/json","Client-Token":t.clientToken,"Time-Stamp":t.timeStamp,"Time-Signature":t.timeSignature},body:JSON.stringify({otp:r,ref:i,password:a,confirmPassword:o})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:return n=e.sent,e.abrupt("return",n);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),c=(i=m(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(t=e.sent,!r||!i){e.next=8;break}return e.next=6,fetch(v.default.verifyOTPEndpoint,{method:"post",mod:"cors",headers:{"Content-Type":"application/json","Client-Token":t.clientToken,"Time-Stamp":t.timeStamp,"Time-Signature":t.timeSignature},body:JSON.stringify({otp:r,ref:i})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 6:return n=e.sent,e.abrupt("return",n);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),u=(a=m(regeneratorRuntime.mark((function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(t=e.sent,!(n=/[06](\d{9})/g.exec(i))){e.next=9;break}return e.next=7,fetch(v.default.requestOTPEndpoint,{method:"post",mod:"cors",headers:{"Content-Type":"application/json","Client-Token":t.clientToken,"Time-Stamp":t.timeStamp,"Time-Signature":t.timeSignature},body:JSON.stringify({phone:"+66"+n[1]})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 7:return r=e.sent,e.abrupt("return",r);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),d=(o=m(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={clientToken:"",timeStamp:"",timeSignature:""},e.next=3,(0,f.generateHeaders)();case 3:if(!(n=e.sent)){e.next=9;break}return t.clientToken=n["Client-Token"],t.timeStamp=n["Time-Stamp"],t.timeSignature=n["Time-Signature"],e.abrupt("return",t);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)});t.forgetPassword=function(){document.querySelector(".container").innerHTML='\n    <div id="login_form">\n        <div id="makesend_logo">\n            <img src="https://www.makesend.asia/wp-content/uploads/2018/06/logo-makesend.png" alt="ms_logo">\n        </div>\n        <h1>Reset Password</h1>\n        <hr>\n        <div id="phone_otp_input">\n        </div>\n        <hr>\n        <div id="backToLogin">\n            <a class="btn btn-primary" href="#">Back to Login</a>\n        </div>\n    </div>\n    ';var e=document.querySelector("#phone_otp_input");if(e){var t='\n        <form action="" method="post" id="submit_phone">\n            <label for="driver_phone" class="form-label">Please enter your phone</label>\n            <div>\n                <input class="form-control" id="driver_phone" type="tel" name="receiver_phone" value=""\n                    inputmode="numeric" placeholder="#0632166699" autocomplete="off" pattern="[0-9]{10}">\n                <button type="submit"><i class="fa fa-search"></i></button>\n                <div id="error_hint" class="invalid-feedback">Phone number starts with 0 and has 10 digits!</div>\n            </div>\n        </form>\n        ';e.innerHTML=t;var n=e.querySelector("#submit_phone");if(e&&n){var r=(i=m(regeneratorRuntime.mark((function n(i){var a,o,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.stopPropagation(),i.preventDefault(),(a=i.target.querySelector("input")).oninput=function(){this.classList.remove("is-invalid")},o=a.value,!/^0\d{9}/g.test(o)){n.next=13;break}return e.innerHTML='\n        <div id="otp_loader">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',n.next=9,u(o);case 9:200===(s=n.sent).resCode?(console.log(s),h.ref=s.otpRef,h.driverPhone=o,h.timeStamp=(new Date).getTime(),e.innerHTML=b(h.driverPhone),g(),y()):(e.innerHTML=t,e.querySelector("#submit_phone").onsubmit=r,console.log(s.message),alert(s.message)),n.next=14;break;case 13:a.classList.add("is-invalid");case 14:case"end":return n.stop()}}),n,this)}))),function(e){return i.apply(this,arguments)});n.onsubmit=r}}var i};var l,p=n(1),v=(l=p)&&l.__esModule?l:{default:l},f=n(0);function m(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var h={otp:"",ref:"",pending:60,driverPhone:null,timeStamp:0,countdownTimer:null};function g(){h.countdownTimer&&clearTimeout(h.countdownTimer);var e=document.querySelector("#countdown");if(e){var t=(new Date).getTime(),n=h.pending,r=Math.floor((t-h.timeStamp)/1e3);if(r>=60?n=0:r<60&&60!==n&&(n=60-r),n>0)h.pending=n-1,e.innerText=h.pending,h.countdownTimer=setTimeout((function(){g(h.pending)}),1e3);else{var i=document.querySelector("#insert_otp button");i.removeAttribute("disabled"),e.parentNode.innerHTML="",i.onclick=function(e){e.preventDefault(),h.pending=60,i.setAttribute("disabled",!0),document.querySelector("#insert_otp button span").innerHTML='(<span id="countdown">'+h.pending+"</span> sec)",g(h.pending)}}}}function y(){var e=document.querySelector("#phone_otp_input"),t=document.querySelector(".digit-group").querySelectorAll("input");t.length&&(t[0].focus(),t.forEach((function(t){var n,r;t.onchange=(n=m(regeneratorRuntime.mark((function t(n){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.parentNode,i=n.target.value,document.querySelector("#invalid_otp").innerText="",!i){t.next=9;break}(a=r.querySelector("input#"+this.dataset.next))&&a.focus(),t.next=23;break;case 9:if(i){t.next=14;break}(o=r.querySelector("input#"+this.dataset.previous))&&o.focus(),t.next=23;break;case 14:if(h.otp="",formTag.querySelectorAll("input").forEach((function(e){h.otp+=e.value})),4!==h.otp.length){t.next=23;break}return s=h.otp,e.innerHTML='\n        <div id="otp_loader">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',t.next=21,c(s,h.ref);case 21:200===(u=t.sent).resCode?(console.log(u),k()):(e.innerHTML=b(h.driverPhone,h.pending),document.querySelector("#invalid_otp").innerText="Invalid OTP Code!",y(),g());case 23:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)}),t.onkeyup=(r=m(regeneratorRuntime.mark((function t(n){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.parentNode,i=r.parentNode,document.querySelector("#invalid_otp").innerText="",8!==n.keyCode&&37!==n.keyCode){t.next=9;break}(a=r.querySelector("input#"+this.dataset.previous))&&a.focus(),t.next=24;break;case 9:if(!(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=65&&n.keyCode<=90||n.keyCode>=96&&n.keyCode<=105||39===n.keyCode)){t.next=24;break}if(!(o=r.querySelector("input#"+this.dataset.next))){t.next=15;break}o.focus(),t.next=24;break;case 15:if(h.otp="",i.querySelectorAll("input").forEach((function(e){h.otp+=e.value})),4!==h.otp.length){t.next=24;break}return s=h.otp,e.innerHTML='\n        <div id="otp_loader">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',t.next=22,c(s,h.ref);case 22:200===(u=t.sent).resCode?(console.log(u),k()):(e.innerHTML=b(h.driverPhone,h.pending),document.querySelector("#invalid_otp").innerText="Invalid OTP Code!",y(),g());case 24:case"end":return t.stop()}}),t,this)}))),function(e){return r.apply(this,arguments)})})))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return'\n    <form class="digit-group" data-group-name="digits" autocomplete="off" id="insert_otp">\n        <div>\n            <h3>Enter OTP Code</h3>\n            <h3>Phone: '+e+'</h3>\n        </div>\n        <div>\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-1" name="digit-1" data-next="digit-2" maxlength="1" />\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-2" name="digit-2" data-next="digit-3" data-previous="digit-1"\n                maxlength="1" />\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-3" name="digit-3" data-next="digit-4" data-previous="digit-2"\n                maxlength="1" />\n            <input autocomplete="off" type="text" inputmode="numeric" id="digit-4" name="digit-4" data-previous="digit-3" maxlength="1" />\n        </div>\n        <div id="invalid_otp"></div>\n        <div>\n            <button class="btn btn-warning" type="submit" disabled>Request OTP <span>(<span id="countdown">'+t+"</span> sec)</span></button>\n        </div>\n    </form>\n    "}function k(){document.querySelector("#phone_otp_input").innerHTML='\n        <form action="" autocomplete="off" id="reset_password_form">\n            <div class="mb-3">\n                <label for="password" class="form-label">New Password</label>\n                <input type="password" class="form-control" id="password" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div class="mb-3">\n                <label for="password_repeat" class="form-label">Confirm password</label>\n                <input type="password" class="form-control" id="password_repeat" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div>\n                <button type="submit" class="btn btn-warning">Reset Password</button>\n            </div>\n        </form>\n    ';var e,t=document.querySelector("#reset_password_form"),n=t.querySelector("button"),r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.querySelectorAll("input")));r.forEach((function(e){e.oninput=function(){r.forEach((function(e){e.classList.remove("is-invalid")}))}})),n.onclick=(e=m(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=r.map((function(e){return e.value?e.value:null})))[0]!==n[1]||!n[0]){e.next=9;break}return e.next=5,s(h.otp,h.ref,n[0],n[1]);case 5:200===(i=e.sent).resCode?(alert(i.message),window.location.hash=""):(console.log(i.message),alert(i.message)),e.next=10;break;case 9:r.forEach((function(e){e.classList.add("is-invalid")}));case 10:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.searchFeatures=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">Search parcel</div>\n    ';var t='\n    <form action="">\n        <input class="form-control" id="receiver_phone" type="tel" name="receiver_phone" value=""\n            inputmode="numeric" placeholder="#0632166699" autocomplete="off" pattern="[0-9]{10}">\n        <button type="submit"><i class="fa fa-search"></i></button>\n    </form>\n    ',n=t,o=window.location.hash.split("?")[0];a.id=(0,i.getParameterByName)("id"),a.parcelId=(0,i.getParameterByName)("parcelId"),a.phone=(0,i.getParameterByName)("phone");var s="warning",c="dark";o.includes("trackingid")?(n='\n    <form action="" class="form-group">\n        <input class="form-control" id="tracking_id" type="text" name="tracking_id" value=""\n            placeholder="#EX1234567890123" autocomplete="off">\n        <button type="submit"><i class="fa fa-search"></i></button>        \n    </form>\n    ',s="dark",c="warning"):n=t;var u=document.querySelector(".container");if(u.style.justifyContent="space-between",u.innerHTML='\n    <div id="search_parcel">\n        <div id="search_functions">\n            <div id="search_by_phone_btn" class="btn btn-'+s+'">Receiver Phone</div>\n            <div id="search_by_tracking_id_btn" class="btn btn-'+c+'">Tracking ID</div>\n        </div>\n        <div id="search_list">\n            <div id="search_bar">\n                '+n+'\n            </div>            \n        </div>\n        <div id="search_filters">\n        </div>\n        <div id="result_list">\n            <ul class="list-group list-group-flush">\n                <li class="list-group-item">Please search parcel by <br> <b>Receiver Phone</b> or <br> <b>Tracking ID</b></li>\n            </ul>\n        </div>\n    </div>\n    ',(0,r.handleSubmitEvent)(),(0,r.handleInputEvent)(),a.id){document.querySelector("#search_bar").querySelector("input").value=a.id,(0,r.searchParcelById)(a.id)}else if(a.phone){document.querySelector("#search_bar").querySelector("input").value=a.phone,(0,r.searchParcelByPhone)(a.phone)}var d=document.querySelector("#search_by_phone_btn"),l=document.querySelector("#search_by_tracking_id_btn");function p(e){var t=this;e.stopPropagation(),[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.parentNode.children)).forEach((function(e){e===t?(e.classList.add("btn-warning"),e.classList.remove("btn-dark")):(e.classList.add("btn-dark"),e.classList.remove("btn-warning"))})),"search_by_tracking_id_btn"===this.id?(document.querySelector("#search_by_tracking_id_btn").classList.add("btn-warning"),document.querySelector("#search_by_phone_btn").classList.add("btn-dark"),window.location.hash="search/trackingid"):"search_by_phone_btn"===this.id&&(window.location.hash="search/phone"),document.querySelector("#result_list ul").innerHTML='<li class="list-group-item">Please search parcel by <br> <b>Receiver Phone</b> or <br> <b>Tracking ID</b></li>',(0,r.handleSubmitEvent)(),(0,r.handleInputEvent)()}d.addEventListener("click",p),l.addEventListener("click",p)};var r=n(3),i=n(2);var a={id:null,phone:"",parcelId:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userLogin=function(){sessionStorage.clear(),localStorage.clear(),window.location.hash="",i.innerHTML='\n        <div id="login_form">\n            <div id="makesend_logo">\n                <img src="https://www.makesend.asia/wp-content/uploads/2018/06/logo-makesend.png" alt="ms_logo">\n            </div>\n            <form action="" autocomplete="off">\n                <div class="mb-3">\n                    <label for="email" class="form-label">Email</label>\n                    <input type="text" class="form-control" id="email" aria-describedby="emailHelp"\n                        autocomplete="off">\n                    <div class="invalid-feedback">Your email is not correct</div>\n                </div>\n                <div class="mb-3">\n                    <label for="password" class="form-label">Password</label>\n                    <input type="password" class="form-control" id="password">\n                    <div class="invalid-feedback">Your password is not correct</div>\n                </div>\n                <div class="mb-3 form-check">\n                    <input type="checkbox" class="form-check-input" id="remember_me" checked>\n                    <label class="form-check-label" for="remember_me">Remember me</label>\n                </div>\n                <button type="submit" class="btn btn-warning">Login</button>\n                <div>\n                    <a href="#forgetpassword">Forget Password?</a>\n                </div>\n            </form>\n        </div>\n    ';var e=document.querySelector("#login_form"),t=document.querySelector("#email"),n=document.querySelector("#password"),a=document.querySelector("#remember_me");function o(){n.classList.remove("is-invalid"),t.classList.remove("is-invalid")}t.addEventListener("input",o),n.addEventListener("input",o),e.addEventListener("submit",(s=regeneratorRuntime.mark((function e(i){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),o=t.value,s=n.value,o&&s){e.next=9;break}t.classList.add("is-invalid"),n.classList.add("is-invalid"),e.next=17;break;case 9:if(!o||!s){e.next=15;break}return e.next=12,(0,r.loginProcess)(o,s,a.checked);case 12:if(!e.sent){e.next=15;break}return e.abrupt("return");case 15:t.classList.add("is-invalid"),n.classList.add("is-invalid");case 17:case"end":return e.stop()}}),e,this)})),c=function(){var e=s.apply(this,arguments);return new Promise((function(t,n){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return c.apply(this,arguments)}));var s,c};var r=n(0);var i=document.querySelector(".container")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.taskList=void 0;var r,i,a,o=(r=f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(g,{method:"POST",mode:"cors",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert(e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)}),s=(i=f(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.generateHeaders)();case 3:return t=e.sent,e.next=6,fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","User-Token":""+(localStorage.getItem("token")||sessionStorage.getItem("token")),"Client-Token":t["Client-Token"],"Time-Stamp":t["Time-Stamp"],"Time-Signature":t["Time-Signature"]}}).then((function(e){return e.json()}));case 6:if(200!==(n=e.sent).resCode){e.next=9;break}return e.abrupt("return",n.orderList);case 9:return e.abrupt("return",[]);case 12:return e.prev=12,e.t0=e.catch(0),alert(e.t0),console.log(e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return i.apply(this,arguments)}),c=n(6),u=n(7),d=n(1),l=(a=d)&&a.__esModule?a:{default:a},p=n(0);function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var m,h=""+l.default.allParcels,g=""+l.default.driverTasks,y={parcels:[],assignments:[],driverTasks:[],countTasks:0,deliveringTasks:0,deliveredTasks:0,otherTasks:0,showCount:0,filteredDriverTasks:[],userId:""};t.taskList=(m=f(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.userId=localStorage.getItem("token"),(t=document.querySelector("header")).style.display="block",t.innerHTML='\n        <div id="header">Driver Tasks</div>\n    ',(n=document.querySelector(".container")).style.justifyContent="space-between",n.innerHTML='\n    <div id="task_list">\n        <div></div>\n        <div></div>\n        <div id="task_loader">\n            <div class="spinner">\n                <div class="spinner__ring spinner-border text-warning" role="status">\n                    <span class="sr-only">Loading...</span>\n                </div>\n                <p class="spinner__text">Loading...</p>\n            </div>\n        </div>        \n    </div>\n    ',e.next=9,s();case 9:return y.parcels=e.sent,e.next=12,o();case 12:y.assignments=e.sent,y.driverTasks=b(y),y.filteredDriverTasks=[].concat(v(y.driverTasks)),document.querySelector("#task_list").innerHTML='\n    <div id="task_summary">\n        <div>\n            <div class="badge bg-secondary">Selected</div>\n            <div id="show_count">'+y.showCount+'</div>\n        </div>\n        <div>\n            <div>\n                <div class="badge bg-primary">Delivering</div>\n                <div>'+y.deliveringTasks+'</div>\n            </div>\n            <div>\n                <div class="badge bg-success">Finished</div>\n                <div>'+y.deliveredTasks+'</div>\n            </div>\n            <div>\n                <div class="badge bg-warning">Others</div>\n                <div>'+y.otherTasks+'</div>\n            </div>\n            <div>\n                <div class="badge bg-secondary">Total</div>\n                <div>'+y.countTasks+'</div>\n            </div>\n        </div>\n    </div>\n    <div id="task_filters"></div>\n    <div id="task_results">\n        <ul class="list-group list-group-flush"></ul>\n    </div>\n    ',document.querySelector("#task_filters").innerHTML='\n    <select id="filter_type">\n        <option value="status">Delivery Status</option>\n    </select>\n    <select id="task_filter">\n        '+[{text:"All",value:"all"},{text:"Delivering",value:"delivering"},{text:"Finished",value:"delivered"},{text:"Others",value:"others"}].reduce((function(e,t){var n='<option value="'+t.value+'">'+t.text+"</option>";return e+=n}),"")+"\n    </select>\n    ",k(y),S(y.driverTasks);case 19:case"end":return e.stop()}}),e,void 0)}))),function(){return m.apply(this,arguments)});function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=e.assignments.parcelsToSort.filter((function(t){return t[12]===e.userId})).map((function(e){return e[1]})),n=e.parcels.filter((function(e){return t.includes(e.trackingID)}));if(n.length!==t.length){var r=t.filter((function(e){return!n.map((function(e){return e.trackingID})).includes(e)})),i=e.assignments.shipmentList.filter((function(e){return r.includes(e[0])})),a=i.reduce((function(t,n){for(var r={},i=0;i<e.assignments.shipmentListHeaders.length;i++)r[e.assignments.shipmentListHeaders[i]]=n[i];return t.push(r),t}),[]);n=[].concat(v(n),v(a))}return e.countTasks=t.length,e.showCount=t.length,e.deliveringTasks=n.filter((function(e){return"delivering"===e.status.toLowerCase()})).length,e.deliveredTasks=n.filter((function(e){return"delivered"===e.status.toLowerCase()})).length,e.otherTasks=e.countTasks-e.deliveringTasks-e.deliveredTasks,n}return[]}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&document.querySelector("#task_filter").addEventListener("change",(function(t){var n=t.target.value;e.filteredDriverTasks="all"===n?e.driverTasks:"others"===n?e.driverTasks.filter((function(e){return"delivered"!==e.status.toLowerCase()&&"delivering"!==e.status.toLowerCase()})):e.driverTasks.filter((function(e){return e.status.toLowerCase()===n.toLowerCase()})),e.showCount=e.filteredDriverTasks.length,document.querySelector("#show_count").innerText=e.showCount,S(e.filteredDriverTasks)}))}function S(e){var t=e.map((function(e){if(/^[eE][xX]\d{13}/g.exec(e.trackingID))return'\n            <li class="list-group-item">\n                <div class="card" data-shipment-id="'+e.trackingID+'">\n                    <div class="card-body">\n                        <h5 class="card-title">Parcel ID: '+e.trackingID+'</h5>\n                        <h6 class="card-subtitle mb-2 text-muted">Service Date: '+e.orderDate+'</h6>\n                        <h6 class="card-subtitle mb-2 text-muted">Delivery Status: '+e.status+'</h6>\n                        <p class="card-text">Client:'+e.receiverName+'</p>\n                        <p class="card-text">Phone:'+e.receiverNo+'</p>\n                        <p class="card-text">Address: '+e.dropAddress+'</p>\n                        <p class="card-text">'+e.dropDistrict+", "+e.dropProvince+", "+e.dropPostcode+"</p>\n                        <div>\n                            "+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t){var n="",r="";switch(e){case"pending":case"in hub":case"delivering":case"delivering (delay)":case"returning":case"re-deilvering":n="primary";break;case"delivered":case"delivered (delay)":case"returned":n="primary",r="disabled";break;case"canceled":case"failed delivery":case"not found":n="danger",r="disabled";break;default:n="primary"}return'\n        <div class="card-link btn btn-'+n+" "+r+'" data-type="photo">Photo</div>\n        <div class="card-link btn btn-'+n+" "+r+'" data-type="signature">Singature</div>\n        '}return null}(e.status.trim().toLowerCase(),e.trackingID)+"\n                        </div>\n                    </div>\n                </div>\n            </li>\n            "})).join("");document.querySelector("#task_results ul").innerHTML=t,[].concat(v(document.querySelector(".list-group.list-group-flush").children)).forEach((function(e){var t=e.querySelector(".card");e.querySelector("div[data-type=signature]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),(0,c.createSignaturePad)(t.dataset.shipmentId)})),e.querySelector("div[data-type=photo]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),(0,u.createImageUploader)(t.dataset.shipmentId)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userSetting=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">SETTINGS</div>\n    ',document.querySelector(".container").innerHTML='\n        <div id="setting">\n            <div id="search_setting">\n                <form action="">\n                    <input id="search_input" type="text" name="search_input" value="" placeholder="Search Setting...">\n                    <button type="submit"><i class="fa fa-search"></i></button>\n                </form>\n            </div>\n            <div id="setting_list">\n                <h3>Account Setting</h3>                        \n                <ul class="list-group list-group-flush">\n                <li class="list-group-item">\n                    <a href="#setting/userprofile">\n                        <div>\n                            <i class="fas fa-user"></i>\n                        </div>\n                        <div>User Profile</div>\n                        <div>\n                            <i class="fas fa-greater-than"></i>\n                        </div>\n                    </a>\n                </li>\n                \x3c!--\n                <li class="list-group-item">\n                    <a href="#setting/resetpassword">\n                        <div>\n                            <i class="fas fa-lock"></i>\n                        </div>\n                        <div>Reset Password</div>\n                        <div>\n                            <i class="fas fa-greater-than"></i>\n                        </div>\n                    </a>\n                </li>\n                --\x3e\n                <li class="list-group-item">\n                    <a href="#setting/about">\n                        <div>\n                            <i class="fas fa-question-circle"></i>\n                        </div>\n                        <div>About</div>\n                        <div>\n                            <i class="fas fa-greater-than"></i>\n                        </div>\n                    </a>\n                </li>\n                </ul>\n            </div>\n            <div>\n                <div id="logout_btn" class="btn btn-secondary">\n                    <div><i class="fas fa-sign-out-alt"></i></div>\n                    <div>Logout</div>\n                </div>\n            </div>\n        </div>\n    ';var t=document.querySelector("#logout_btn");(0,r.userLogout)(t)};var r=n(17)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userLogout=function(e){var t=document.querySelector("footer"),n=document.querySelector(".container");e.onclick=function(e){e.stopPropagation(),sessionStorage.clear(),localStorage.clear(),t.innerHTML="",n.style.justifyContent="center",window.location.hash=""}},t.user_logout_legacy=function(){var e=document.querySelector("#navi_logout"),t=document.querySelector("body"),n=document.querySelector("footer");e.addEventListener("click",(function(e){e.stopPropagation(),sessionStorage.clear(),localStorage.clear(),n.innerHTML="",t.style.backgroundColor="rgba(0, 0, 0, 0.1)",document.querySelector(".container").style.justifyContent="center",window.location.hash=""}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetPasswordState=function(){c.otp="",c.ref="",c.pending=60,c.timeStamp=0,c.countdownTimer=null,c.redirectCountdownTimer=null,c.step=1},t.resetPassword=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n    <div id="header">reset password</div>\n    ',document.querySelector("#setting").innerHTML='\n        <div>\n            <div class="progress-container">\n                <div class="progress" id="progress"></div>\n                <div class="circle active">\n                    1\n                </div>\n                <div class="circle">\n                    2\n                </div>\n                <div class="circle">\n                    3\n                </div>\n                <div class="circle">\n                    4\n                </div>\n            </div>\n            <h1>Request OTP</h1>\n        </div>\n        <div id="phone_otp_input_login">\n            <button class="btn btn-warning">Request OTP <span></span></button>\n        </div>\n        <div>\n            <a href="#setting" class="btn btn-primary">Back To Setting</a>\n        </div>\n        ',function(){u(c.step);var e=document.querySelector("#phone_otp_input_login"),t=e.querySelector("button");if(e&&t){var n=(r=s(regeneratorRuntime.mark((function t(n){var r,a,s,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),e.innerHTML='\n        <div id="otp_loader_login">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',t.next=4,(0,i.generateHeaders)();case 4:return r=t.sent,a=(0,i.userToken)(),s={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+a,"Client-Token":r["Client-Token"],"Time-Stamp":r["Time-Stamp"],"Time-Signature":r["Time-Signature"]}},t.next=9,fetch(o.default.loginRequestOTPEndpoint,s).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 9:200===(p=t.sent).resCode?(c.ref=p.otpRef,c.timeStamp=(new Date).getTime(),e.innerHTML=m(),c.step+=1,u(c.step),d(),l()):(console.log(p.message),alert(p.message),window.location.hash="setting");case 11:case"end":return t.stop()}}),t,this)}))),function(e){return r.apply(this,arguments)});t.onclick=n}var r}()};var r,i=n(0),a=n(1),o=(r=a)&&r.__esModule?r:{default:r};function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var c={otp:"",ref:"",pending:60,timeStamp:0,countdownTimer:null,redirectCountdownTimer:null,step:1};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";switch(e){case 1:t="request otp";break;case 2:t="verify otp";break;case 3:t="set new password";break;case 4:t="Success!";break;default:t="request otp"}var n=document.querySelector("#progress"),r=document.querySelectorAll(".circle"),i=document.querySelector("#setting h1");i.innerText=t;var a=e;function o(){r.forEach((function(e,t){t<a?e.classList.add("active"):e.classList.remove("active")}));var e=document.querySelectorAll(".active");n.style.width=(e.length-1)/(r.length-1)*100+"%"}o()}function d(){c.countdownTimer&&clearTimeout(c.countdownTimer);var e=document.querySelector("#countdown");if(e){var t=(new Date).getTime(),n=c.pending,r=Math.floor((t-c.timeStamp)/1e3);if(r>=60?n=0:r<60&&60!==n&&(n=60-r),n>0)c.pending=n-1,e.innerText=c.pending,c.countdownTimer=setTimeout((function(){d(c.pending)}),1e3);else{var i=document.querySelector("#insert_otp_login button");i.removeAttribute("disabled"),e.parentNode.innerHTML="",i.onclick=function(e){e.preventDefault(),c.pending=60,i.setAttribute("disabled",!0),document.querySelector("#insert_otp_login button span").innerHTML='(<span id="countdown">'+c.pending+"</span> sec)",d(c.pending)}}}}function l(){var e=document.querySelector("#phone_otp_input_login"),t=document.querySelector(".digit-group").querySelectorAll("input");t.length&&(t[0].focus(),t.forEach((function(t){var n,r;t.onchange=(n=s(regeneratorRuntime.mark((function t(n){var r,a,s,v,f,h,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.parentNode,a=n.target.value,document.querySelector("#invalid_otp_login").innerText="",!a){t.next=9;break}(s=r.querySelector("input#"+this.dataset.next))&&s.focus(),t.next=27;break;case 9:if(a){t.next=14;break}(v=r.querySelector("input#"+this.dataset.previous))&&v.focus(),t.next=27;break;case 14:if(c.otp="",formTag.querySelectorAll("input").forEach((function(e){c.otp+=e.value})),4!==c.otp.length){t.next=27;break}return e.innerHTML='\n        <div id="otp_loader_login">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',t.next=20,(0,i.generateHeaders)();case 20:return f=t.sent,h=(0,i.userToken)(),g={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+h,"Client-Token":f["Client-Token"],"Time-Stamp":f["Time-Stamp"],"Time-Signature":f["Time-Signature"]},body:JSON.stringify({otp:c.otp,ref:c.ref})},t.next=25,fetch(o.default.loginVerifyOTPEndpoint,g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 25:200===t.sent.resCode?(c.step+=1,u(c.step),p()):(e.innerHTML=m(c.pending),document.querySelector("#invalid_otp_login").innerText="Invalid OTP Code!",l(),d());case 27:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)}),t.onkeyup=(r=s(regeneratorRuntime.mark((function t(n){var r,a,s,v,f,h,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.parentNode,a=r.parentNode,document.querySelector("#invalid_otp_login").innerText="",8!==n.keyCode&&37!==n.keyCode){t.next=9;break}(s=r.querySelector("input#"+this.dataset.previous))&&s.focus(),t.next=28;break;case 9:if(!(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=65&&n.keyCode<=90||n.keyCode>=96&&n.keyCode<=105||39===n.keyCode)){t.next=28;break}if(!(v=r.querySelector("input#"+this.dataset.next))){t.next=15;break}v.focus(),t.next=28;break;case 15:if(c.otp="",a.querySelectorAll("input").forEach((function(e){c.otp+=e.value})),4!==c.otp.length){t.next=28;break}return e.innerHTML='\n        <div id="otp_loader_login">\n            <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <h4>Loading...</h4>\n        </div>\n    ',t.next=21,(0,i.generateHeaders)();case 21:return f=t.sent,h=(0,i.userToken)(),g={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+h,"Client-Token":f["Client-Token"],"Time-Stamp":f["Time-Stamp"],"Time-Signature":f["Time-Signature"]},body:JSON.stringify({otp:c.otp,ref:c.ref})},t.next=26,fetch(o.default.loginVerifyOTPEndpoint,g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 26:200===t.sent.resCode?(c.step+=1,u(c.step),p()):(e.innerHTML=m(c.pending),document.querySelector("#invalid_otp_login").innerText="Invalid OTP Code!",l(),d());case 28:case"end":return t.stop()}}),t,this)}))),function(e){return r.apply(this,arguments)})})))}function p(){var e=document.querySelector("#phone_otp_input_login");e.innerHTML='\n        <form action="" autocomplete="off" id="reset_password_form_login">\n            <div class="mb-3">\n                <label for="password" class="form-label">New Password</label>\n                <input type="password" class="form-control" id="password_login" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div class="mb-3">\n                <label for="password_repeat" class="form-label">Confirm password</label>\n                <input type="password" class="form-control" id="password_repeat_login" required>\n                <div class="invalid-feedback">Your password do not match</div>\n            </div>\n            <div style="display:flex; justify-content: center; align-items: center;">\n                <button type="submit" class="btn btn-warning">Reset Password</button>\n            </div>\n        </form>\n    ';var t,n=document.querySelector("#reset_password_form_login"),r=n.querySelector("button"),a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.querySelectorAll("input")));a[0].focus(),a.forEach((function(e){e.oninput=function(){a.forEach((function(e){e.classList.remove("is-invalid")}))}})),r.onclick=(t=s(regeneratorRuntime.mark((function t(n){var r,s,d,l,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(r=a.map((function(e){return e.value?e.value:null})))[0]!==r[1]||!r[0]){t.next=14;break}return t.next=5,(0,i.generateHeaders)();case 5:return s=t.sent,d=(0,i.userToken)(),l={method:"post",mod:"cors",headers:{"Content-Type":"application/json","User-Token":""+d,"Client-Token":s["Client-Token"],"Time-Stamp":s["Time-Stamp"],"Time-Signature":s["Time-Signature"]},body:JSON.stringify({otp:c.otp,ref:c.ref,password:r[0],confirmPassword:r[1]})},t.next=10,fetch(o.default.loginVerifyOTPEndpoint,l).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 10:200===(p=t.sent).resCode?(c.step+=1,u(c.step),console.log(p.message),e.innerHTML=f(3),v(3),setTimeout((function(){c.step=1,window.location.hash="setting"}),3e3)):(console.log(p.message),alert(p.message)),t.next=15;break;case 14:a.forEach((function(e){e.classList.add("is-invalid")}));case 15:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=document.querySelector("#redirect_countdown");e>0?c.redirectCountdownTimer=setTimeout((function(){t.innerText=e-1,v(e-1)}),1e3):c.redirectCountdownTimer&&clearTimeout(c.redirectCountdownTimer)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10";return'\n        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">\n            <img style="display:block; width: 50%; border-radius: 10px;" src="https://i.pinimg.com/originals/e8/06/52/e80652af2c77e3a73858e16b2ffe5f9a.gif">\n            <div>\n                <h2 style="text-align: center;">Success!</h2>\n            </div>\n            <div>\n                <p style="text-align: center;">Page redirect in <span id="redirect_countdown">'+e+"</span> seconds...</p>\n            </div>\n        </div>\n    "}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return'\n    <form class="digit-group" data-group-name="digits" autocomplete="off" id="insert_otp_login">\n        <div>\n            <h3>Enter OTP Code</h3>\n        </div>\n        <div>\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-1" name="digit-1" data-next="digit-2" maxlength="1" />\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-2" name="digit-2" data-next="digit-3" data-previous="digit-1"\n                maxlength="1" />\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-3" name="digit-3" data-next="digit-4" data-previous="digit-2"\n                maxlength="1" />\n            <input autocomplete=off type="text" inputmode="numeric" id="digit-4" name="digit-4" data-previous="digit-3" maxlength="1" />\n        </div>\n        <div id="invalid_otp_login"></div>\n        <div>\n            <button class="btn btn-warning" type="submit" disabled>Request OTP <span>(<span id="countdown">'+e+"</span> sec)</span></button>\n        </div>\n    </form>\n    "}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userProfileSetting=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">user profile</div>\n    ',document.querySelector("#setting").innerHTML='\n        <div>\n        \n        </div>\n        <div>\n            \n        </div>\n        <div>\n            <a href="#setting" class="btn btn-primary">Back To Setting</a>\n        </div>\n    '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aboutDriverApp=function(){var e=document.querySelector("header");e.style.display="block",e.innerHTML='\n        <div id="header">user profile</div>\n    ',document.querySelector("#setting").innerHTML='\n        <div>\n        \n        </div>\n        <div>\n            \n        </div>\n        <div>\n            <a href="#setting" class="btn btn-primary">Back To Setting</a>\n        </div>\n    '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,a=(r=regeneratorRuntime.mark((function e(t){var n,r,i,a,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=document.querySelector("#register_qr"),r=document.querySelector("#preprint_id_register"),i=document.querySelector("#tracking_id_register"),c.id=r.value.trim().toLowerCase(),a=c.id,c.trackingId=i.value.trim().toLowerCase(),s=c.trackingId,n.innerHTML='\n            <div id="loader">\n                <div class="spinner-border text-warning" style="width:3rem; height:3rem;" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                </div>\n                <h4>Loading...</h4>\n            </div>\n        ',!/^p{2}\d{13}$/g.test(a)||!/^ex\d{13}$/g.test(s)){e.next=17;break}return e.next=12,(0,o.registerPreprintId)(c.id,c.trackingId);case 12:p=e.sent,console.log(p),200===p.resCode?(n.innerHTML=d(3),l(3),setTimeout((function(){var e=c.trackingId;c.redirectCountdownTimer=null,c.id="",c.trackingId="",window.location.hash="search/trackingid?id="+e}),3e3)):(console.log(p.message),alert(p.message),u()),e.next=18;break;case 17:u();case 18:case"end":return e.stop()}}),e,this)})),i=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(i,a){try{var o=e[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return i.apply(this,arguments)});t.qrRegister=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.querySelector("header");n.style.display="block",n.innerHTML='\n        <div id="header">Register ID</div>\n    ';var r=document.querySelector(".container");r.innerHTML='\n    <div id="register_qr">\n        <div>\n            <form action="" autocomplete="off">\n                <div class="mb-3">\n                    <label for="preprint_id_register" class="form-label">Prerint QR ID</label>\n                    <input type="text" class="form-control" id="preprint_id_register" autocomplete="off"\n                        placeholder="#PP0123456789012">\n                    <div class="invalid-feedback">Preprint ID starts with "PP"</div>\n                </div>\n                <div class="mb-3">\n                    <label for="tracking_id_register" class="form-label">Parcel Tracking ID</label>\n                    <input type="text" class="form-control" id="tracking_id_register"\n                        placeholder="#EX0123456789012">\n                    <div class="invalid-feedback">Parcel Tracking ID starts with "EX"</div>\n                </div>\n                <button type="submit" class="btn btn-warning">Register Parcel ID</button>\n            </form>\n        </div>\n    </div>\n    ',c.id=(0,s.getParameterByName)("id")||e,c.trackingId=(0,s.getParameterByName)("trackingId")||t;var i=document.querySelector("#preprint_id_register"),o=document.querySelector("#tracking_id_register");i.addEventListener("input",p),o.addEventListener("input",p),c.id&&(i.value=c.id);c.trackingId&&(o.value=c.trackingId);var u=document.querySelector("#register_qr"),d=u.querySelector("form");d.onsubmit=a};var o=n(5),s=n(2);var c={redirectCountdownTimer:null,id:"",trackingId:""};function u(){document.querySelector("#register_qr").innerHTML='\n            <div>\n                <form action="" autocomplete="off">\n                    <div class="mb-3">\n                        <label for="preprint_id_register" class="form-label">Prerint QR ID</label>\n                        <input type="text" class="form-control" id="preprint_id_register" autocomplete="off"\n                            placeholder="#PP0123456789012">\n                        <div class="invalid-feedback">Preprint ID starts with "PP"</div>\n                    </div>\n                    <div class="mb-3">\n                        <label for="tracking_id_register" class="form-label">Parcel Tracking ID</label>\n                        <input type="text" class="form-control" id="tracking_id_register"\n                            placeholder="#EX0123456789012">\n                        <div class="invalid-feedback">Parcel Tracking ID starts with "EX"</div>\n                    </div>\n                    <button type="submit" class="btn btn-warning">Register Parcel ID</button>\n                </form>\n            </div>\n            ';var e=document.querySelector("#preprint_id_register"),t=document.querySelector("#tracking_id_register");e.classList.add("is-invalid"),t.classList.add("is-invalid"),e.addEventListener("input",p),t.addEventListener("input",p),document.querySelector("#register_qr form").onsubmit=a}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10";return'\n            <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">\n                <img style="display:block; width: 50%; border-radius: 10px;" src="https://i.pinimg.com/originals/e8/06/52/e80652af2c77e3a73858e16b2ffe5f9a.gif">\n                <div>\n                    <h2 style="text-align: center;">Success!</h2>\n                </div>\n                <div>\n                    <p style="text-align: center;">Page redirect in <span id="redirect_countdown">'+e+"</span> seconds...</p>\n                </div>\n            </div>\n        "}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=document.querySelector("#redirect_countdown");e>0?c.redirectCountdownTimer=setTimeout((function(){t.innerText=e-1,l(e-1)}),1e3):c.redirectCountdownTimer&&clearTimeout(c.redirectCountdownTimer)}function p(){this.id.includes("tracking_id")?c.id=this.value:this.id.includes("preprint_id")&&(c.trackingId=this.value);var e=document.querySelectorAll("input");[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)).forEach((function(e){e.classList.remove("is-invalid")}))}}]);